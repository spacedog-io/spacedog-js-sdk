(function (global, factory) {
     typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
     typeof define === 'function' && define.amd ? define(factory) :
     (global.SpaceDog = factory());
}(this, (function () { 'use strict';

var Config = {

    backendId: null,

    default_authorization_header: null

};

var qs = require('qs');

var UrlBuilder = {
    forLogin: function forLogin() {
        return 'https://' + Config.backendId + '.spacedog.io/1/login';
    },
    forSchema: function forSchema() {
        return 'https://' + Config.backendId + '.spacedog.io/1/schema';
    },
    forOneSchema: function forOneSchema(type) {
        return 'https://' + Config.backendId + '.spacedog.io/1/schema/' + type;
    },
    forSearch: function forSearch(type) {
        return 'https://' + Config.backendId + '.spacedog.io/1/search/' + type;
    },
    forCredentials: function forCredentials() {
        return 'https://' + Config.backendId + '.spacedog.io/1/credentials';
    },
    forData: function forData(type) {
        return 'https://' + Config.backendId + '.spacedog.io/1/data/' + type;
    },
    forDataObject: function forDataObject(type, id, opts) {
        var url = 'https://' + Config.backendId + '.spacedog.io/1/data/' + type + '/' + id;
        if (opts) {
            return url + '?' + qs.stringify(opts);
        }
        return url;
    }
};

var _xend = function _xend(method, payload, url, cb) {

    var data = null;
    if (payload) {
        data = JSON.stringify(payload);
    }

    var xhr = new XMLHttpRequest();

    xhr.onreadystatechange = function () {
        if (xhr.readyState === 4) {
            try {
                var json = JSON.parse(xhr.responseText);

                // console.log("-----\nSpaceDog.Xhr# SUCCESS 88 xhr.responseText (=",xhr.responseText,") \n\n (xhr.url=",xhr.url,") \n\n (xhr.method=",xhr.method,") \n\n (xhr=",xhr,"\n\n-------\n")

                if (json != null && (json.success == false || !(xhr.status >= 200 && xhr.status < 300))) {
                    cb(json, null);
                } else {
                    cb(null, json);
                }
            } catch (e) {
                console.warn("-----\nSpaceDog.Xhr# could not parse xhr.responseText (=", xhr.responseText, ") \n\n (xhr.url=", xhr.url, ") \n\n (xhr.method=", xhr.method, ") \n\n (xhr=", xhr, ") and therefore not able to 1/ set authorization headers 2/ remember user token, if rememberMe is true\n\nPossibly something else. Check the caught exeption:\n\n", e, "\n\n-------\n");
                cb(xhr.responseText, null);
            }
        }
    };

    xhr.open(method, url);
    xhr.setRequestHeader("content-type", "application/json");

    if (Config.default_authorization_header != null) {
        xhr.setRequestHeader("authorization", Config.default_authorization_header);
    }

    if (data == null) {
        xhr.send();
    } else {
        xhr.send(data);
    }
};

var UtilXHR = {
    get: function get(url, cb) {
        _xend("GET", null, url, cb);
    },
    post: function post(payload, url, cb) {
        _xend("POST", payload, url, cb);
    },
    put: function put(payload, url, cb) {
        _xend("PUT", payload, url, cb);
    },
    delete: function _delete(url, cb) {
        _xend("DELETE", null, url, cb);
    }
};

var Credentials = {
    /**
     * opts : { username:string, password:string, rememberMe:bool }
     * cb : callback function
     */
    login: function login(opts, cb) {

        try {
            Config.default_authorization_header = "Basic " + new Buffer(opts.username + ":" + opts.password).toString('base64');
        } catch (e) {
            Config.default_authorization_header = "Basic " + btoa(opts.username + ":" + opts.password);
        }

        UtilXHR.get(UrlBuilder.forLogin(), function (err, data) {

            if (err != null) {

                Config.default_authorization_header = null;
            } else {

                Config.default_authorization_header = "Bearer " + data.accessToken;

                if (opts.rememberMe) {

                    localStorage.setItem('SPACEDOG_CREDENTIALS_TOKEN', JSON.stringify({
                        "accessToken": data.accessToken,
                        "backendId": Config.backendId
                    }));
                }
            }

            cb(err, data);
        });
    },
    loginWithSavedCredentials: function loginWithSavedCredentials(cb) {

        var saved = JSON.parse(localStorage.getItem('SPACEDOG_CREDENTIALS_TOKEN'));

        Config.backendId = saved.backendId;

        Config.default_authorization_header = "Bearer " + saved.accessToken;

        UtilXHR.get(UrlBuilder.forLogin(), function (err, data) {

            if (err == null) {

                Config.default_authorization_header = "Bearer " + data.accessToken;
            }

            cb(err, data);
        });
    },
    createUser: function createUser(opts, cb) {

        UtilXHR.post({
            username: opts.credentials.username,
            password: opts.credentials.password
        }, UrlBuilder.forCredentials(), function (err, data) {

            if (err == null) {

                var userPayload = opts.user.payload;

                userPayload[opts.user.credentialIdField] = data.id;

                UtilXHR.post(opts.user.payload, UrlBuilder.forData(opts.user.type), function (err, data) {
                    if (err == null) {

                        userPayload.username = opts.credentials.username;
                        userPayload.meta = {
                            id: data.id
                        };

                        cb(null, userPayload);
                    } else {
                        cb(err, null);
                    }
                });
            } else {

                cb(err, null);
            }
        });
    },
    forget: function forget() {
        Config.default_authorization_header = null;
        localStorage.removeItem('SPACEDOG_CREDENTIALS_TOKEN');
    },
    getRememberedState: function getRememberedState() {
        return JSON.parse(localStorage.getItem('SPACEDOG_CREDENTIALS_TOKEN'));
    },
    canTryLogin: function canTryLogin() {
        return localStorage.getItem('SPACEDOG_CREDENTIALS_TOKEN') != undefined && localStorage.getItem('SPACEDOG_CREDENTIALS_TOKEN') != null;
    }
};

var classCallCheck = function (instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
};

var createClass = function () {
  function defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];
      descriptor.enumerable = descriptor.enumerable || false;
      descriptor.configurable = true;
      if ("value" in descriptor) descriptor.writable = true;
      Object.defineProperty(target, descriptor.key, descriptor);
    }
  }

  return function (Constructor, protoProps, staticProps) {
    if (protoProps) defineProperties(Constructor.prototype, protoProps);
    if (staticProps) defineProperties(Constructor, staticProps);
    return Constructor;
  };
}();

var PaginationSession = function () {
    function PaginationSession(from, size) {
        classCallCheck(this, PaginationSession);

        this._from = from;
        this._size = size;
        this._total = null;
    }

    createClass(PaginationSession, [{
        key: "isNextPageAvailable",
        value: function isNextPageAvailable() {
            if (this._total == null) {
                return true;
            }
            return this._from + this._size < this._total;
        }
    }, {
        key: "isPrevPageAvailable",
        value: function isPrevPageAvailable() {
            if (this._total == null) {
                return false;
            }
            return this._from >= this._size;
        }
    }, {
        key: "_newPageLoaded",
        value: function _newPageLoaded(result) {
            this._total = result.total;
        }
    }, {
        key: "pointNextPage",
        value: function pointNextPage() {
            this._from += this._size;
        }
    }, {
        key: "pointPrevPage",
        value: function pointPrevPage() {
            this._from -= this._size;
        }
    }, {
        key: "getFrom",
        value: function getFrom() {
            return this._from;
        }
    }, {
        key: "getSize",
        value: function getSize() {
            return this._size;
        }
    }]);
    return PaginationSession;
}();

var Object$1 = function () {
  function Object(type, id, payload) {
    classCallCheck(this, Object);

    this._type = type;
    this._id = id;
    this._payload = payload;
  }

  createClass(Object, [{
    key: 'create',
    value: function create(cb) {
      var ret = this._payload;
      UtilXHR.post(this._payload, UrlBuilder.forData(this._type), function (err, data) {

        if (data) {
          ret.meta = {
            id: data.id
          };
        }

        cb(err, ret);
      });
    }
  }, {
    key: 'update',
    value: function update(cb, opts) {
      UtilXHR.put(this._payload, UrlBuilder.forDataObject(this._type, this._id, opts), cb);
    }
  }, {
    key: 'delete',
    value: function _delete(cb) {
      UtilXHR.delete(UrlBuilder.forDataObject(this._type, this._id), cb);
    }
  }]);
  return Object;
}();

var Data = {

    PaginationSession: PaginationSession,

    buildObject: function buildObject(type, id, payload) {
        return new Object$1(type, id, payload);
    },


    /**
     * opts : { type:string }
     * cb : callback function
     * paginationSession : optional paginationSession
     */
    search: function search(opts, cb, paginationSession) {

        if (opts.payload == undefined) {
            opts.payload = {};
        }

        if (paginationSession) {

            opts.payload.from = paginationSession.getFrom(), opts.payload.size = paginationSession.getSize();
        }

        UtilXHR.post(opts.payload, UrlBuilder.forSearch(opts.type), function (err, data) {
            if (err != null) {
                cb(err, data);
            } else {

                if (paginationSession) paginationSession._newPageLoaded(data);

                cb(err, data);
            }
        });
    }
};

var Schema = {

  /**
   * cb : callback function
   */
  list: function list(cb) {

    UtilXHR.get(UrlBuilder.forSchema(), cb);
  },


  /**
   * type : string, the name of the schema
   * schemaDef : content for the new schema : _acl and other elastic search attributes
   * cb : callback function
   */
  create: function create(type, schemaDef, cb) {

    var payload = {};
    payload[type] = schemaDef;

    UtilXHR.post(payload, UrlBuilder.forOneSchema(type), cb);
  }
};

var DataPermission = {

     all: ['create', 'read', 'read_all', 'search', 'update', 'update_all', 'delete', 'delete_all'],

     default_admin: ['create', 'search', 'update_all', 'delete_all'],

     default_user: ['create', 'search', 'update', 'delete'],

     default_key: ['read_all']

};

var DataTypes = [{
  name: 'string'
}, {
  name: 'boolean'
}];

var SpaceDog = {
    initialize: function initialize(backendId) {
        if (backendId == undefined) {
            throw "BackendId is required.";
        }
        Config.backendId = backendId;
    },
    getBackendId: function getBackendId() {
        return Config.backendId;
    },
    forgetAll: function forgetAll() {
        Config.backendId = null;
        Config.default_authorization_header = null;
    }
};

SpaceDog._Config = Config; // pas en release ?
SpaceDog.Credentials = Credentials;
SpaceDog.Data = Data;
SpaceDog.Schema = Schema;
SpaceDog.DataPermission = DataPermission;
SpaceDog.DataTypes = DataTypes;

return SpaceDog;

})));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbInNyYy9saWIvY29uZmlnLmpzIiwic3JjL2xpYi91cmxCdWlsZGVyLmpzIiwic3JjL2xpYi91dGlsWGhyLmpzIiwic3JjL2xpYi9jcmVkZW50aWFscy5qcyIsInNyYy9saWIvcGFnaW5hdGlvblNlc3Npb24uanMiLCJzcmMvbGliL29iamVjdC5qcyIsInNyYy9saWIvZGF0YS5qcyIsInNyYy9saWIvc2NoZW1hLmpzIiwic3JjL2xpYi9kYXRhUGVybWlzc2lvbi5qcyIsInNyYy9saWIvZGF0YVR5cGVzLmpzIiwic3JjL3NwYWNlZG9nLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IHtcblxuICAgIGJhY2tlbmRJZDpudWxsLFxuXG4gICAgZGVmYXVsdF9hdXRob3JpemF0aW9uX2hlYWRlcjpudWxsXG5cbn0iLCJpbXBvcnQgQ29uZmlnIGZyb20gJy4vY29uZmlnLmpzJ1xudmFyIHFzID0gcmVxdWlyZSgncXMnKTtcblxuZXhwb3J0IGRlZmF1bHQge1xuXG4gICAgZm9yTG9naW4gKCkge1xuICAgICAgICByZXR1cm4gYGh0dHBzOi8vJHtDb25maWcuYmFja2VuZElkfS5zcGFjZWRvZy5pby8xL2xvZ2luYFxuICAgIH0sXG5cbiAgICBmb3JTY2hlbWEgKCkge1xuICAgICAgICByZXR1cm4gYGh0dHBzOi8vJHtDb25maWcuYmFja2VuZElkfS5zcGFjZWRvZy5pby8xL3NjaGVtYWAgIFxuICAgIH0sXG5cbiAgICBmb3JPbmVTY2hlbWEgKHR5cGUpIHtcbiAgICAgICAgcmV0dXJuIGBodHRwczovLyR7Q29uZmlnLmJhY2tlbmRJZH0uc3BhY2Vkb2cuaW8vMS9zY2hlbWEvJHt0eXBlfWAgIFxuICAgIH0sXG5cbiAgICBmb3JTZWFyY2ggKHR5cGUpIHtcbiAgICAgICAgcmV0dXJuIGBodHRwczovLyR7Q29uZmlnLmJhY2tlbmRJZH0uc3BhY2Vkb2cuaW8vMS9zZWFyY2gvJHt0eXBlfWBcbiAgICB9LFxuXG4gICAgZm9yQ3JlZGVudGlhbHMgKCkge1xuICAgICAgICByZXR1cm4gYGh0dHBzOi8vJHtDb25maWcuYmFja2VuZElkfS5zcGFjZWRvZy5pby8xL2NyZWRlbnRpYWxzYFxuICAgIH0sXG5cbiAgICBmb3JEYXRhICh0eXBlKSB7XG4gICAgICAgIHJldHVybiBgaHR0cHM6Ly8ke0NvbmZpZy5iYWNrZW5kSWR9LnNwYWNlZG9nLmlvLzEvZGF0YS8ke3R5cGV9YFxuICAgIH0sXG5cbiAgICBmb3JEYXRhT2JqZWN0ICh0eXBlLCBpZCwgb3B0cykge1xuICAgICAgICB2YXIgdXJsID0gYGh0dHBzOi8vJHtDb25maWcuYmFja2VuZElkfS5zcGFjZWRvZy5pby8xL2RhdGEvJHt0eXBlfS8ke2lkfWBcbiAgICAgICAgaWYgKG9wdHMpIHtcbiAgICAgICAgICAgIHJldHVybiBgJHt1cmx9PyR7cXMuc3RyaW5naWZ5KG9wdHMpfWBcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXJsXG4gICAgfSxcblxufSIsImltcG9ydCBDb25maWcgZnJvbSAnLi9jb25maWcnXG5cbnZhciBfeGVuZCA9IGZ1bmN0aW9uKG1ldGhvZCwgcGF5bG9hZCwgdXJsLCBjYil7XG5cbiAgICB2YXIgZGF0YSA9IG51bGw7XG4gICAgaWYgKHBheWxvYWQpIHtcbiAgICAgICAgZGF0YSA9IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpO1xuICAgIH1cblxuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBqc29uID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcblxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCItLS0tLVxcblNwYWNlRG9nLlhociMgU1VDQ0VTUyA4OCB4aHIucmVzcG9uc2VUZXh0ICg9XCIseGhyLnJlc3BvbnNlVGV4dCxcIikgXFxuXFxuICh4aHIudXJsPVwiLHhoci51cmwsXCIpIFxcblxcbiAoeGhyLm1ldGhvZD1cIix4aHIubWV0aG9kLFwiKSBcXG5cXG4gKHhocj1cIix4aHIsXCJcXG5cXG4tLS0tLS0tXFxuXCIpXG5cbiAgICAgICAgICAgIGlmIChqc29uICE9IG51bGwgJiYgKGpzb24uc3VjY2Vzcz09ZmFsc2UgfHwgISh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgMzAwICkpKSB7XG4gICAgICAgICAgICAgICAgY2IoanNvbiwgbnVsbClcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYihudWxsLCBqc29uKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIi0tLS0tXFxuU3BhY2VEb2cuWGhyIyBjb3VsZCBub3QgcGFyc2UgeGhyLnJlc3BvbnNlVGV4dCAoPVwiLHhoci5yZXNwb25zZVRleHQsXCIpIFxcblxcbiAoeGhyLnVybD1cIix4aHIudXJsLFwiKSBcXG5cXG4gKHhoci5tZXRob2Q9XCIseGhyLm1ldGhvZCxcIikgXFxuXFxuICh4aHI9XCIseGhyLFwiKSBhbmQgdGhlcmVmb3JlIG5vdCBhYmxlIHRvIDEvIHNldCBhdXRob3JpemF0aW9uIGhlYWRlcnMgMi8gcmVtZW1iZXIgdXNlciB0b2tlbiwgaWYgcmVtZW1iZXJNZSBpcyB0cnVlXFxuXFxuUG9zc2libHkgc29tZXRoaW5nIGVsc2UuIENoZWNrIHRoZSBjYXVnaHQgZXhlcHRpb246XFxuXFxuXCIsIGUsXCJcXG5cXG4tLS0tLS0tXFxuXCIpXG4gICAgICAgICAgICBjYih4aHIucmVzcG9uc2VUZXh0LCBudWxsKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgeGhyLm9wZW4obWV0aG9kLCB1cmwpO1xuICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiY29udGVudC10eXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcblxuICAgIGlmIChDb25maWcuZGVmYXVsdF9hdXRob3JpemF0aW9uX2hlYWRlciAhPSBudWxsKSB7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiYXV0aG9yaXphdGlvblwiLCBDb25maWcuZGVmYXVsdF9hdXRob3JpemF0aW9uX2hlYWRlcilcbiAgICB9XG5cbiAgICBpZiAoZGF0YSA9PSBudWxsKSB7XG4gICAgICAgIHhoci5zZW5kKClcbiAgICB9IGVsc2Uge1xuICAgICAgICB4aHIuc2VuZChkYXRhKTtcbiAgICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIGdldCAodXJsLCBjYikge1xuICAgICAgICBfeGVuZChcIkdFVFwiLCBudWxsLCB1cmwsIGNiKVxuICAgIH0sXG5cbiAgICBwb3N0IChwYXlsb2FkLCB1cmwsIGNiKSB7XG4gICAgICAgIF94ZW5kKFwiUE9TVFwiLCBwYXlsb2FkLCB1cmwsIGNiKVxuICAgIH0sXG5cbiAgICBwdXQgKHBheWxvYWQsIHVybCwgY2IpIHtcbiAgICAgICAgX3hlbmQoXCJQVVRcIiwgcGF5bG9hZCwgdXJsLCBjYilcbiAgICB9LFxuXG4gICAgZGVsZXRlICh1cmwsIGNiKSB7XG4gICAgICAgIF94ZW5kKFwiREVMRVRFXCIsIG51bGwsIHVybCwgY2IpXG4gICAgfSxcbn0iLCJpbXBvcnQgVXJsQnVpbGRlciBmcm9tICcuL3VybEJ1aWxkZXIuanMnXG5pbXBvcnQgQ29uZmlnIGZyb20gJy4vY29uZmlnLmpzJ1xuaW1wb3J0IFV0aWxYSFIgZnJvbSAnLi91dGlsWGhyJ1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgLyoqXG4gICAgICogb3B0cyA6IHsgdXNlcm5hbWU6c3RyaW5nLCBwYXNzd29yZDpzdHJpbmcsIHJlbWVtYmVyTWU6Ym9vbCB9XG4gICAgICogY2IgOiBjYWxsYmFjayBmdW5jdGlvblxuICAgICAqL1xuICAgIGxvZ2luIChvcHRzLCBjYikge1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDb25maWcuZGVmYXVsdF9hdXRob3JpemF0aW9uX2hlYWRlciA9IFwiQmFzaWMgXCIrbmV3IEJ1ZmZlcihvcHRzLnVzZXJuYW1lK1wiOlwiK29wdHMucGFzc3dvcmQpLnRvU3RyaW5nKCdiYXNlNjQnKVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBDb25maWcuZGVmYXVsdF9hdXRob3JpemF0aW9uX2hlYWRlciA9IFwiQmFzaWMgXCIrYnRvYShvcHRzLnVzZXJuYW1lK1wiOlwiK29wdHMucGFzc3dvcmQpXG4gICAgICAgIH1cblxuICAgICAgICBVdGlsWEhSLmdldChVcmxCdWlsZGVyLmZvckxvZ2luKCksIGZ1bmN0aW9uKGVyciwgZGF0YSkge1xuXG4gICAgICAgICAgICBpZiAoZXJyICE9IG51bGwpIHtcblxuICAgICAgICAgICAgICAgIENvbmZpZy5kZWZhdWx0X2F1dGhvcml6YXRpb25faGVhZGVyID0gbnVsbCAgICAgICAgICAgICAgICBcblxuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIENvbmZpZy5kZWZhdWx0X2F1dGhvcml6YXRpb25faGVhZGVyID0gXCJCZWFyZXIgXCIrZGF0YS5hY2Nlc3NUb2tlblxuXG4gICAgICAgICAgICAgICAgaWYgKG9wdHMucmVtZW1iZXJNZSkge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdTUEFDRURPR19DUkVERU5USUFMU19UT0tFTicsIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgXCJhY2Nlc3NUb2tlblwiOmRhdGEuYWNjZXNzVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIFwiYmFja2VuZElkXCI6Q29uZmlnLmJhY2tlbmRJZFxuICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjYihlcnIsIGRhdGEpXG5cbiAgICAgICAgfSlcblxuICAgIH0sXG5cbiAgICBsb2dpbldpdGhTYXZlZENyZWRlbnRpYWxzIChjYikgIHtcblxuICAgICAgICB2YXIgc2F2ZWQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdTUEFDRURPR19DUkVERU5USUFMU19UT0tFTicpKVxuXG4gICAgICAgIENvbmZpZy5iYWNrZW5kSWQgPSBzYXZlZC5iYWNrZW5kSWRcblxuICAgICAgICBDb25maWcuZGVmYXVsdF9hdXRob3JpemF0aW9uX2hlYWRlciA9IFwiQmVhcmVyIFwiK3NhdmVkLmFjY2Vzc1Rva2VuXG5cbiAgICAgICAgVXRpbFhIUi5nZXQoVXJsQnVpbGRlci5mb3JMb2dpbigpLCBmdW5jdGlvbihlcnIsIGRhdGEpIHtcblxuICAgICAgICAgICAgaWYgKGVyciA9PSBudWxsKSB7XG5cbiAgICAgICAgICAgICAgICBDb25maWcuZGVmYXVsdF9hdXRob3JpemF0aW9uX2hlYWRlciA9IFwiQmVhcmVyIFwiK2RhdGEuYWNjZXNzVG9rZW5cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjYihlcnIsIGRhdGEpXG5cbiAgICAgICAgfSlcblxuICAgIH0sXG5cbiAgICBjcmVhdGVVc2VyIChvcHRzLCBjYikge1xuXG4gICAgICAgIFV0aWxYSFIucG9zdCh7XG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6IG9wdHMuY3JlZGVudGlhbHMudXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IG9wdHMuY3JlZGVudGlhbHMucGFzc3dvcmQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgVXJsQnVpbGRlci5mb3JDcmVkZW50aWFscygpLFxuICAgICAgICAgICAgZnVuY3Rpb24oZXJyLCBkYXRhKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoZXJyID09IG51bGwpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgdXNlclBheWxvYWQgPSBvcHRzLnVzZXIucGF5bG9hZFxuXG4gICAgICAgICAgICAgICAgICAgIHVzZXJQYXlsb2FkW29wdHMudXNlci5jcmVkZW50aWFsSWRGaWVsZF0gPSBkYXRhLmlkXG5cbiAgICAgICAgICAgICAgICAgICAgVXRpbFhIUi5wb3N0KG9wdHMudXNlci5wYXlsb2FkLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIFVybEJ1aWxkZXIuZm9yRGF0YShvcHRzLnVzZXIudHlwZSksIFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyLCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVyciA9PSBudWxsKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlclBheWxvYWQudXNlcm5hbWUgPSBvcHRzLmNyZWRlbnRpYWxzLnVzZXJuYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJQYXlsb2FkLm1ldGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDpkYXRhLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNiIChudWxsLCB1c2VyUGF5bG9hZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYiAoZXJyLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY2IoZXJyLCBudWxsKTtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgfSxcblxuXG4gICAgZm9yZ2V0ICgpIHtcbiAgICAgICAgQ29uZmlnLmRlZmF1bHRfYXV0aG9yaXphdGlvbl9oZWFkZXIgPSBudWxsXG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdTUEFDRURPR19DUkVERU5USUFMU19UT0tFTicpXG4gICAgfSxcblxuICAgIGdldFJlbWVtYmVyZWRTdGF0ZSAoKSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdTUEFDRURPR19DUkVERU5USUFMU19UT0tFTicpKVxuICAgIH0sXG5cbiAgICBjYW5UcnlMb2dpbiAoKSB7XG4gICAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnU1BBQ0VET0dfQ1JFREVOVElBTFNfVE9LRU4nKSE9dW5kZWZpbmVkICYmIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdTUEFDRURPR19DUkVERU5USUFMU19UT0tFTicpIT1udWxsXG4gICAgfVxufSIsIlxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFnaW5hdGlvblNlc3Npb24ge1xuXG4gICAgY29uc3RydWN0b3IgKGZyb20sIHNpemUpIHtcbiAgICAgICAgdGhpcy5fZnJvbSA9IGZyb21cbiAgICAgICAgdGhpcy5fc2l6ZSA9IHNpemVcbiAgICAgICAgdGhpcy5fdG90YWwgPSBudWxsXG4gICAgfVxuXG4gICAgaXNOZXh0UGFnZUF2YWlsYWJsZSAoKSB7XG4gICAgICAgIGlmICh0aGlzLl90b3RhbCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9mcm9tICsgdGhpcy5fc2l6ZSA8IHRoaXMuX3RvdGFsXG4gICAgfVxuXG5cbiAgICBpc1ByZXZQYWdlQXZhaWxhYmxlICgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3RvdGFsID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9mcm9tID49IHRoaXMuX3NpemVcbiAgICB9XG5cbiAgICBfbmV3UGFnZUxvYWRlZCAocmVzdWx0KSB7XG4gICAgICAgIHRoaXMuX3RvdGFsID0gcmVzdWx0LnRvdGFsXG4gICAgfVxuXG4gICAgcG9pbnROZXh0UGFnZSAoKSB7XG4gICAgICAgIHRoaXMuX2Zyb20gKz0gdGhpcy5fc2l6ZVxuICAgIH1cblxuICAgIHBvaW50UHJldlBhZ2UgKCkge1xuICAgICAgICB0aGlzLl9mcm9tIC09IHRoaXMuX3NpemVcbiAgICB9XG5cbiAgICBnZXRGcm9tICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zyb21cbiAgICB9XG5cbiAgICBnZXRTaXplICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NpemVcbiAgICB9XG5cbn0iLCJpbXBvcnQgVXJsQnVpbGRlciBmcm9tICcuL3VybEJ1aWxkZXInXG5pbXBvcnQgVXRpbFhIUiBmcm9tICcuL3V0aWxYaHInXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9iamVjdCB7XG5cbiAgY29uc3RydWN0b3IgKHR5cGUsIGlkLCBwYXlsb2FkKSB7XG4gICAgdGhpcy5fdHlwZSA9IHR5cGVcbiAgICB0aGlzLl9pZCA9IGlkXG4gICAgdGhpcy5fcGF5bG9hZCA9IHBheWxvYWRcbiAgfVxuXG4gIGNyZWF0ZSAoY2IpIHtcbiAgICB2YXIgcmV0ID0gdGhpcy5fcGF5bG9hZDtcbiAgICBVdGlsWEhSLnBvc3QodGhpcy5fcGF5bG9hZCwgVXJsQnVpbGRlci5mb3JEYXRhKHRoaXMuX3R5cGUpLCBmdW5jdGlvbihlcnIsIGRhdGEpe1xuXG4gICAgICBpZiAoZGF0YSkge1xuICAgICAgICByZXQubWV0YSA9IHtcbiAgICAgICAgICBpZDogZGF0YS5pZFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNiKGVyciwgcmV0KVxuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlIChjYiwgb3B0cykge1xuICAgIFV0aWxYSFIucHV0KHRoaXMuX3BheWxvYWQsIFVybEJ1aWxkZXIuZm9yRGF0YU9iamVjdCh0aGlzLl90eXBlLCB0aGlzLl9pZCwgb3B0cyksIGNiKVxuICB9XG5cbiAgZGVsZXRlIChjYikge1xuICAgIFV0aWxYSFIuZGVsZXRlKFVybEJ1aWxkZXIuZm9yRGF0YU9iamVjdCh0aGlzLl90eXBlLCB0aGlzLl9pZCksIGNiKVxuICB9XG5cbn0iLCJpbXBvcnQgVXJsQnVpbGRlciBmcm9tICcuL3VybEJ1aWxkZXInXG5pbXBvcnQgVXRpbFhIUiBmcm9tICcuL3V0aWxYaHInXG5pbXBvcnQgUGFnaW5hdGlvblNlc3Npb24gZnJvbSAnLi9wYWdpbmF0aW9uU2Vzc2lvbidcbmltcG9ydCBPYmplY3QgZnJvbSAnLi9vYmplY3QnXG5cbnZhciBEYXRhID0ge1xuICAgIFxuICAgIFBhZ2luYXRpb25TZXNzaW9uLFxuXG4gICAgYnVpbGRPYmplY3QgKHR5cGUsIGlkLCBwYXlsb2FkKSB7XG4gICAgICByZXR1cm4gbmV3IE9iamVjdCAodHlwZSwgaWQsIHBheWxvYWQpXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIG9wdHMgOiB7IHR5cGU6c3RyaW5nIH1cbiAgICAgKiBjYiA6IGNhbGxiYWNrIGZ1bmN0aW9uXG4gICAgICogcGFnaW5hdGlvblNlc3Npb24gOiBvcHRpb25hbCBwYWdpbmF0aW9uU2Vzc2lvblxuICAgICAqL1xuICAgIHNlYXJjaCAob3B0cywgY2IsIHBhZ2luYXRpb25TZXNzaW9uKSB7XG5cbiAgICAgICAgaWYgKG9wdHMucGF5bG9hZCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG9wdHMucGF5bG9hZCA9IHt9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGFnaW5hdGlvblNlc3Npb24pIHtcblxuICAgICAgICAgICAgb3B0cy5wYXlsb2FkLmZyb20gPSBwYWdpbmF0aW9uU2Vzc2lvbi5nZXRGcm9tKCksXG4gICAgICAgICAgICBvcHRzLnBheWxvYWQuc2l6ZSA9IHBhZ2luYXRpb25TZXNzaW9uLmdldFNpemUoKVxuXG4gICAgICAgIH1cblxuICAgICAgICBVdGlsWEhSLnBvc3Qob3B0cy5wYXlsb2FkLCBVcmxCdWlsZGVyLmZvclNlYXJjaChvcHRzLnR5cGUpLCBmdW5jdGlvbihlcnIsIGRhdGEpe1xuICAgICAgICAgICAgaWYgKGVyciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY2IoZXJyLCBkYXRhKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICBpZiAocGFnaW5hdGlvblNlc3Npb24pXG4gICAgICAgICAgICAgICAgICAgIHBhZ2luYXRpb25TZXNzaW9uLl9uZXdQYWdlTG9hZGVkKGRhdGEpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY2IoZXJyLCBkYXRhKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBEYXRhIiwiaW1wb3J0IFVybEJ1aWxkZXIgZnJvbSAnLi91cmxCdWlsZGVyLmpzJ1xuaW1wb3J0IFV0aWxYSFIgZnJvbSAnLi91dGlsWGhyLmpzJ1xuXG5leHBvcnQgZGVmYXVsdCB7XG5cbiAgICAvKipcbiAgICAgKiBjYiA6IGNhbGxiYWNrIGZ1bmN0aW9uXG4gICAgICovXG4gICAgbGlzdCAoY2IpIHtcblxuICAgICAgVXRpbFhIUi5nZXQoVXJsQnVpbGRlci5mb3JTY2hlbWEoKSwgY2IpXG5cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogdHlwZSA6IHN0cmluZywgdGhlIG5hbWUgb2YgdGhlIHNjaGVtYVxuICAgICAqIHNjaGVtYURlZiA6IGNvbnRlbnQgZm9yIHRoZSBuZXcgc2NoZW1hIDogX2FjbCBhbmQgb3RoZXIgZWxhc3RpYyBzZWFyY2ggYXR0cmlidXRlc1xuICAgICAqIGNiIDogY2FsbGJhY2sgZnVuY3Rpb25cbiAgICAgKi9cbiAgICBjcmVhdGUgKHR5cGUsIHNjaGVtYURlZiwgY2IpIHtcblxuICAgICAgdmFyIHBheWxvYWQgPSB7fTtcbiAgICAgIHBheWxvYWRbdHlwZV0gPSBzY2hlbWFEZWY7XG5cbiAgICAgIFV0aWxYSFIucG9zdChwYXlsb2FkLCBVcmxCdWlsZGVyLmZvck9uZVNjaGVtYSh0eXBlKSwgY2IpO1xuXG4gICAgfSxcbn0iLCJcbmV4cG9ydCBkZWZhdWx0IHtcbiAgXG4gIGFsbDogWydjcmVhdGUnLFxuICAgICAgICdyZWFkJyxcbiAgICAgICAncmVhZF9hbGwnLFxuICAgICAgICdzZWFyY2gnLFxuICAgICAgICd1cGRhdGUnLFxuICAgICAgICd1cGRhdGVfYWxsJyxcbiAgICAgICAnZGVsZXRlJyxcbiAgICAgICAnZGVsZXRlX2FsbCddLFxuXG4gIGRlZmF1bHRfYWRtaW46IFsnY3JlYXRlJywgJ3NlYXJjaCcsICd1cGRhdGVfYWxsJywgJ2RlbGV0ZV9hbGwnXSxcblxuICBkZWZhdWx0X3VzZXI6IFsnY3JlYXRlJywgJ3NlYXJjaCcsICd1cGRhdGUnLCAnZGVsZXRlJ10sXG5cbiAgZGVmYXVsdF9rZXk6IFsncmVhZF9hbGwnXSxcblxufSIsImV4cG9ydCBkZWZhdWx0IFt7XG4gICAgbmFtZTonc3RyaW5nJyxcbiAgfSx7XG4gICAgbmFtZTonYm9vbGVhbicsXG4gIH1dOyIsIlxuaW1wb3J0IENvbmZpZyBmcm9tICcuL2xpYi9jb25maWcuanMnXG5pbXBvcnQgQ3JlZGVudGlhbHMgZnJvbSAnLi9saWIvY3JlZGVudGlhbHMuanMnXG5pbXBvcnQgRGF0YSBmcm9tICcuL2xpYi9kYXRhLmpzJ1xuaW1wb3J0IFNjaGVtYSBmcm9tICcuL2xpYi9zY2hlbWEuanMnXG5pbXBvcnQgRGF0YVBlcm1pc3Npb24gZnJvbSAnLi9saWIvZGF0YVBlcm1pc3Npb24uanMnXG5pbXBvcnQgRGF0YVR5cGVzIGZyb20gJy4vbGliL2RhdGFUeXBlcy5qcydcblxudmFyIFNwYWNlRG9nID0ge1xuICAgIGluaXRpYWxpemUgKGJhY2tlbmRJZCkge1xuICAgICAgICBpZiAoYmFja2VuZElkID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgXCJCYWNrZW5kSWQgaXMgcmVxdWlyZWQuXCJcbiAgICAgICAgfVxuICAgICAgICBDb25maWcuYmFja2VuZElkID0gYmFja2VuZElkXG4gICAgfSxcbiAgICBcbiAgICBnZXRCYWNrZW5kSWQgKCkge1xuICAgICAgICByZXR1cm4gQ29uZmlnLmJhY2tlbmRJZFxuICAgIH0sXG5cbiAgICBmb3JnZXRBbGwgKCkge1xuICAgICAgICBDb25maWcuYmFja2VuZElkID0gbnVsbFxuICAgICAgICBDb25maWcuZGVmYXVsdF9hdXRob3JpemF0aW9uX2hlYWRlciA9IG51bGxcbiAgICB9XG59XG5cblxuU3BhY2VEb2cuX0NvbmZpZyA9IENvbmZpZyAvLyBwYXMgZW4gcmVsZWFzZSA/XG5TcGFjZURvZy5DcmVkZW50aWFscyA9IENyZWRlbnRpYWxzXG5TcGFjZURvZy5EYXRhID0gRGF0YVxuU3BhY2VEb2cuU2NoZW1hID0gU2NoZW1hXG5TcGFjZURvZy5EYXRhUGVybWlzc2lvbiA9IERhdGFQZXJtaXNzaW9uXG5TcGFjZURvZy5EYXRhVHlwZXMgPSBEYXRhVHlwZXNcblxuZXhwb3J0IGRlZmF1bHQgU3BhY2VEb2dcbiJdLCJuYW1lcyI6WyJxcyIsInJlcXVpcmUiLCJDb25maWciLCJiYWNrZW5kSWQiLCJ0eXBlIiwiaWQiLCJvcHRzIiwidXJsIiwic3RyaW5naWZ5IiwiX3hlbmQiLCJtZXRob2QiLCJwYXlsb2FkIiwiY2IiLCJkYXRhIiwiSlNPTiIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsImpzb24iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsInN1Y2Nlc3MiLCJzdGF0dXMiLCJlIiwid2FybiIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwiZGVmYXVsdF9hdXRob3JpemF0aW9uX2hlYWRlciIsInNlbmQiLCJCdWZmZXIiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwidG9TdHJpbmciLCJidG9hIiwiZ2V0IiwiVXJsQnVpbGRlciIsImZvckxvZ2luIiwiZXJyIiwiYWNjZXNzVG9rZW4iLCJyZW1lbWJlck1lIiwic2V0SXRlbSIsInNhdmVkIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInBvc3QiLCJjcmVkZW50aWFscyIsImZvckNyZWRlbnRpYWxzIiwidXNlclBheWxvYWQiLCJ1c2VyIiwiY3JlZGVudGlhbElkRmllbGQiLCJmb3JEYXRhIiwibWV0YSIsInJlbW92ZUl0ZW0iLCJ1bmRlZmluZWQiLCJQYWdpbmF0aW9uU2Vzc2lvbiIsImZyb20iLCJzaXplIiwiX2Zyb20iLCJfc2l6ZSIsIl90b3RhbCIsInJlc3VsdCIsInRvdGFsIiwiT2JqZWN0IiwiX3R5cGUiLCJfaWQiLCJfcGF5bG9hZCIsInJldCIsInB1dCIsImZvckRhdGFPYmplY3QiLCJkZWxldGUiLCJEYXRhIiwicGFnaW5hdGlvblNlc3Npb24iLCJnZXRGcm9tIiwiZ2V0U2l6ZSIsImZvclNlYXJjaCIsIl9uZXdQYWdlTG9hZGVkIiwiZm9yU2NoZW1hIiwic2NoZW1hRGVmIiwiZm9yT25lU2NoZW1hIiwiU3BhY2VEb2ciLCJfQ29uZmlnIiwiQ3JlZGVudGlhbHMiLCJTY2hlbWEiLCJEYXRhUGVybWlzc2lvbiIsIkRhdGFUeXBlcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsYUFBZTs7ZUFFRCxJQUZDOztrQ0FJa0I7O0NBSmpDOztBQ0NBLElBQUlBLEtBQUtDLFFBQVEsSUFBUixDQUFUOztBQUVBLGlCQUFlO1lBQUEsc0JBRUM7NEJBQ1VDLE9BQU9DLFNBQXpCO0tBSE87YUFBQSx1QkFNRTs0QkFDU0QsT0FBT0MsU0FBekI7S0FQTztnQkFBQSx3QkFVR0MsSUFWSCxFQVVTOzRCQUNFRixPQUFPQyxTQUF6Qiw4QkFBMkRDLElBQTNEO0tBWE87YUFBQSxxQkFjQUEsSUFkQSxFQWNNOzRCQUNLRixPQUFPQyxTQUF6Qiw4QkFBMkRDLElBQTNEO0tBZk87a0JBQUEsNEJBa0JPOzRCQUNJRixPQUFPQyxTQUF6QjtLQW5CTztXQUFBLG1CQXNCRkMsSUF0QkUsRUFzQkk7NEJBQ09GLE9BQU9DLFNBQXpCLDRCQUF5REMsSUFBekQ7S0F2Qk87aUJBQUEseUJBMEJJQSxJQTFCSixFQTBCVUMsRUExQlYsRUEwQmNDLElBMUJkLEVBMEJvQjtZQUN2QkMsbUJBQWlCTCxPQUFPQyxTQUF4Qiw0QkFBd0RDLElBQXhELFNBQWdFQyxFQUFwRTtZQUNJQyxJQUFKLEVBQVU7bUJBQ0lDLEdBQVYsU0FBaUJQLEdBQUdRLFNBQUgsQ0FBYUYsSUFBYixDQUFqQjs7ZUFFR0MsR0FBUDs7Q0EvQlI7O0FDREEsSUFBSUUsUUFBUSxTQUFSQSxLQUFRLENBQVNDLE1BQVQsRUFBaUJDLE9BQWpCLEVBQTBCSixHQUExQixFQUErQkssRUFBL0IsRUFBa0M7O1FBRXRDQyxPQUFPLElBQVg7UUFDSUYsT0FBSixFQUFhO2VBQ0ZHLEtBQUtOLFNBQUwsQ0FBZUcsT0FBZixDQUFQOzs7UUFHQUksTUFBTSxJQUFJQyxjQUFKLEVBQVY7O1FBRUlDLGtCQUFKLEdBQXlCLFlBQVk7WUFDL0JGLElBQUlHLFVBQUosS0FBbUIsQ0FBdkIsRUFBMEI7Z0JBQ3BCO29CQUNJQyxPQUFPTCxLQUFLTSxLQUFMLENBQVdMLElBQUlNLFlBQWYsQ0FBWDs7OztvQkFJSUYsUUFBUSxJQUFSLEtBQWlCQSxLQUFLRyxPQUFMLElBQWMsS0FBZCxJQUF1QixFQUFFUCxJQUFJUSxNQUFKLElBQWMsR0FBZCxJQUFxQlIsSUFBSVEsTUFBSixHQUFhLEdBQXBDLENBQXhDLENBQUosRUFBd0Y7dUJBQ2pGSixJQUFILEVBQVMsSUFBVDtpQkFESixNQUdPO3VCQUNBLElBQUgsRUFBU0EsSUFBVDs7YUFUUixDQVlFLE9BQU9LLENBQVAsRUFBVTt3QkFDQUMsSUFBUixDQUFhLDBEQUFiLEVBQXdFVixJQUFJTSxZQUE1RSxFQUF5RixrQkFBekYsRUFBNEdOLElBQUlSLEdBQWhILEVBQW9ILHFCQUFwSCxFQUEwSVEsSUFBSUwsTUFBOUksRUFBcUosY0FBckosRUFBb0tLLEdBQXBLLEVBQXdLLG1LQUF4SyxFQUE2VVMsQ0FBN1UsRUFBK1UsZUFBL1U7bUJBQ0dULElBQUlNLFlBQVAsRUFBcUIsSUFBckI7OztLQWhCUjs7UUFxQklLLElBQUosQ0FBU2hCLE1BQVQsRUFBaUJILEdBQWpCO1FBQ0lvQixnQkFBSixDQUFxQixjQUFyQixFQUFxQyxrQkFBckM7O1FBRUl6QixPQUFPMEIsNEJBQVAsSUFBdUMsSUFBM0MsRUFBaUQ7WUFDekNELGdCQUFKLENBQXFCLGVBQXJCLEVBQXNDekIsT0FBTzBCLDRCQUE3Qzs7O1FBR0FmLFFBQVEsSUFBWixFQUFrQjtZQUNWZ0IsSUFBSjtLQURKLE1BRU87WUFDQ0EsSUFBSixDQUFTaEIsSUFBVDs7Q0F4Q1I7O0FBNkNBLGNBQWU7T0FBQSxlQUNOTixHQURNLEVBQ0RLLEVBREMsRUFDRztjQUNKLEtBQU4sRUFBYSxJQUFiLEVBQW1CTCxHQUFuQixFQUF3QkssRUFBeEI7S0FGTztRQUFBLGdCQUtMRCxPQUxLLEVBS0lKLEdBTEosRUFLU0ssRUFMVCxFQUthO2NBQ2QsTUFBTixFQUFjRCxPQUFkLEVBQXVCSixHQUF2QixFQUE0QkssRUFBNUI7S0FOTztPQUFBLGVBU05ELE9BVE0sRUFTR0osR0FUSCxFQVNRSyxFQVRSLEVBU1k7Y0FDYixLQUFOLEVBQWFELE9BQWIsRUFBc0JKLEdBQXRCLEVBQTJCSyxFQUEzQjtLQVZPO1VBQUEsbUJBYUhMLEdBYkcsRUFhRUssRUFiRixFQWFNO2NBQ1AsUUFBTixFQUFnQixJQUFoQixFQUFzQkwsR0FBdEIsRUFBMkJLLEVBQTNCOztDQWRSOztBQzNDQSxrQkFBZTs7Ozs7U0FBQSxpQkFLSk4sSUFMSSxFQUtFTSxFQUxGLEVBS007O1lBRVQ7bUJBQ09nQiw0QkFBUCxHQUFzQyxXQUFTLElBQUlFLE1BQUosQ0FBV3hCLEtBQUt5QixRQUFMLEdBQWMsR0FBZCxHQUFrQnpCLEtBQUswQixRQUFsQyxFQUE0Q0MsUUFBNUMsQ0FBcUQsUUFBckQsQ0FBL0M7U0FESixDQUVFLE9BQU9ULENBQVAsRUFBVTttQkFDREksNEJBQVAsR0FBc0MsV0FBU00sS0FBSzVCLEtBQUt5QixRQUFMLEdBQWMsR0FBZCxHQUFrQnpCLEtBQUswQixRQUE1QixDQUEvQzs7O2dCQUdJRyxHQUFSLENBQVlDLFdBQVdDLFFBQVgsRUFBWixFQUFtQyxVQUFTQyxHQUFULEVBQWN6QixJQUFkLEVBQW9COztnQkFFL0N5QixPQUFPLElBQVgsRUFBaUI7O3VCQUVOViw0QkFBUCxHQUFzQyxJQUF0QzthQUZKLE1BSU87O3VCQUVJQSw0QkFBUCxHQUFzQyxZQUFVZixLQUFLMEIsV0FBckQ7O29CQUVJakMsS0FBS2tDLFVBQVQsRUFBcUI7O2lDQUVOQyxPQUFiLENBQXFCLDRCQUFyQixFQUFtRDNCLEtBQUtOLFNBQUwsQ0FBZTt1Q0FDbERLLEtBQUswQixXQUQ2QztxQ0FFcERyQyxPQUFPQztxQkFGOEIsQ0FBbkQ7Ozs7ZUFRSG1DLEdBQUgsRUFBUXpCLElBQVI7U0FwQko7S0FiTzs2QkFBQSxxQ0F1Q2dCRCxFQXZDaEIsRUF1Q3FCOztZQUV4QjhCLFFBQVE1QixLQUFLTSxLQUFMLENBQVd1QixhQUFhQyxPQUFiLENBQXFCLDRCQUFyQixDQUFYLENBQVo7O2VBRU96QyxTQUFQLEdBQW1CdUMsTUFBTXZDLFNBQXpCOztlQUVPeUIsNEJBQVAsR0FBc0MsWUFBVWMsTUFBTUgsV0FBdEQ7O2dCQUVRSixHQUFSLENBQVlDLFdBQVdDLFFBQVgsRUFBWixFQUFtQyxVQUFTQyxHQUFULEVBQWN6QixJQUFkLEVBQW9COztnQkFFL0N5QixPQUFPLElBQVgsRUFBaUI7O3VCQUVOViw0QkFBUCxHQUFzQyxZQUFVZixLQUFLMEIsV0FBckQ7OztlQUlERCxHQUFILEVBQVF6QixJQUFSO1NBUko7S0EvQ087Y0FBQSxzQkE2RENQLElBN0RELEVBNkRPTSxFQTdEUCxFQTZEVzs7Z0JBRVZpQyxJQUFSLENBQWE7c0JBQ0t2QyxLQUFLd0MsV0FBTCxDQUFpQmYsUUFEdEI7c0JBRUt6QixLQUFLd0MsV0FBTCxDQUFpQmQ7U0FGbkMsRUFJSUksV0FBV1csY0FBWCxFQUpKLEVBS0ksVUFBU1QsR0FBVCxFQUFjekIsSUFBZCxFQUFvQjs7Z0JBRVp5QixPQUFPLElBQVgsRUFBaUI7O29CQUVUVSxjQUFjMUMsS0FBSzJDLElBQUwsQ0FBVXRDLE9BQTVCOzs0QkFFWUwsS0FBSzJDLElBQUwsQ0FBVUMsaUJBQXRCLElBQTJDckMsS0FBS1IsRUFBaEQ7O3dCQUVRd0MsSUFBUixDQUFhdkMsS0FBSzJDLElBQUwsQ0FBVXRDLE9BQXZCLEVBQ0l5QixXQUFXZSxPQUFYLENBQW1CN0MsS0FBSzJDLElBQUwsQ0FBVTdDLElBQTdCLENBREosRUFFSSxVQUFTa0MsR0FBVCxFQUFjekIsSUFBZCxFQUFvQjt3QkFDWnlCLE9BQU8sSUFBWCxFQUFpQjs7b0NBRURQLFFBQVosR0FBdUJ6QixLQUFLd0MsV0FBTCxDQUFpQmYsUUFBeEM7b0NBQ1lxQixJQUFaLEdBQW1CO2dDQUNadkMsS0FBS1I7eUJBRFo7OzJCQUlJLElBQUosRUFBVTJDLFdBQVY7cUJBUEosTUFTTzsyQkFDQ1YsR0FBSixFQUFTLElBQVQ7O2lCQWJaO2FBTkosTUF1Qk87O21CQUVBQSxHQUFILEVBQVEsSUFBUjs7U0FoQ1o7S0EvRE87VUFBQSxvQkF1R0Q7ZUFDQ1YsNEJBQVAsR0FBc0MsSUFBdEM7cUJBQ2F5QixVQUFiLENBQXdCLDRCQUF4QjtLQXpHTztzQkFBQSxnQ0E0R1c7ZUFDWHZDLEtBQUtNLEtBQUwsQ0FBV3VCLGFBQWFDLE9BQWIsQ0FBcUIsNEJBQXJCLENBQVgsQ0FBUDtLQTdHTztlQUFBLHlCQWdISTtlQUNKRCxhQUFhQyxPQUFiLENBQXFCLDRCQUFyQixLQUFvRFUsU0FBcEQsSUFBaUVYLGFBQWFDLE9BQWIsQ0FBcUIsNEJBQXJCLEtBQW9ELElBQTVIOztDQWpIUjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUNIcUJXOytCQUVKQyxJQUFiLEVBQW1CQyxJQUFuQixFQUF5Qjs7O2FBQ2hCQyxLQUFMLEdBQWFGLElBQWI7YUFDS0csS0FBTCxHQUFhRixJQUFiO2FBQ0tHLE1BQUwsR0FBYyxJQUFkOzs7Ozs4Q0FHbUI7Z0JBQ2YsS0FBS0EsTUFBTCxJQUFlLElBQW5CLEVBQXlCO3VCQUNkLElBQVA7O21CQUVHLEtBQUtGLEtBQUwsR0FBYSxLQUFLQyxLQUFsQixHQUEwQixLQUFLQyxNQUF0Qzs7Ozs4Q0FJbUI7Z0JBQ2YsS0FBS0EsTUFBTCxJQUFlLElBQW5CLEVBQXlCO3VCQUNkLEtBQVA7O21CQUVHLEtBQUtGLEtBQUwsSUFBYyxLQUFLQyxLQUExQjs7Ozt1Q0FHWUUsUUFBUTtpQkFDZkQsTUFBTCxHQUFjQyxPQUFPQyxLQUFyQjs7Ozt3Q0FHYTtpQkFDUkosS0FBTCxJQUFjLEtBQUtDLEtBQW5COzs7O3dDQUdhO2lCQUNSRCxLQUFMLElBQWMsS0FBS0MsS0FBbkI7Ozs7a0NBR087bUJBQ0EsS0FBS0QsS0FBWjs7OztrQ0FHTzttQkFDQSxLQUFLQyxLQUFaOzs7Ozs7SUN0Q2FJO2tCQUVOM0QsSUFBYixFQUFtQkMsRUFBbkIsRUFBdUJNLE9BQXZCLEVBQWdDOzs7U0FDekJxRCxLQUFMLEdBQWE1RCxJQUFiO1NBQ0s2RCxHQUFMLEdBQVc1RCxFQUFYO1NBQ0s2RCxRQUFMLEdBQWdCdkQsT0FBaEI7Ozs7OzJCQUdNQyxJQUFJO1VBQ051RCxNQUFNLEtBQUtELFFBQWY7Y0FDUXJCLElBQVIsQ0FBYSxLQUFLcUIsUUFBbEIsRUFBNEI5QixXQUFXZSxPQUFYLENBQW1CLEtBQUthLEtBQXhCLENBQTVCLEVBQTRELFVBQVMxQixHQUFULEVBQWN6QixJQUFkLEVBQW1COztZQUV6RUEsSUFBSixFQUFVO2NBQ0p1QyxJQUFKLEdBQVc7Z0JBQ0x2QyxLQUFLUjtXQURYOzs7V0FLQ2lDLEdBQUgsRUFBUTZCLEdBQVI7T0FSRjs7OzsyQkFZTXZELElBQUlOLE1BQU07Y0FDUjhELEdBQVIsQ0FBWSxLQUFLRixRQUFqQixFQUEyQjlCLFdBQVdpQyxhQUFYLENBQXlCLEtBQUtMLEtBQTlCLEVBQXFDLEtBQUtDLEdBQTFDLEVBQStDM0QsSUFBL0MsQ0FBM0IsRUFBaUZNLEVBQWpGOzs7OzRCQUdNQSxJQUFJO2NBQ0YwRCxNQUFSLENBQWVsQyxXQUFXaUMsYUFBWCxDQUF5QixLQUFLTCxLQUE5QixFQUFxQyxLQUFLQyxHQUExQyxDQUFmLEVBQStEckQsRUFBL0Q7Ozs7OztBQ3pCSixJQUFJMkQsT0FBTzs7d0NBQUE7O2VBQUEsdUJBSU1uRSxJQUpOLEVBSVlDLEVBSlosRUFJZ0JNLE9BSmhCLEVBSXlCO2VBQ3ZCLElBQUlvRCxRQUFKLENBQVkzRCxJQUFaLEVBQWtCQyxFQUFsQixFQUFzQk0sT0FBdEIsQ0FBUDtLQUxLOzs7Ozs7OztVQUFBLGtCQWFDTCxJQWJELEVBYU9NLEVBYlAsRUFhVzRELGlCQWJYLEVBYThCOztZQUU3QmxFLEtBQUtLLE9BQUwsSUFBZ0IyQyxTQUFwQixFQUErQjtpQkFDdEIzQyxPQUFMLEdBQWUsRUFBZjs7O1lBR0E2RCxpQkFBSixFQUF1Qjs7aUJBRWQ3RCxPQUFMLENBQWE2QyxJQUFiLEdBQW9CZ0Isa0JBQWtCQyxPQUFsQixFQUFwQixFQUNBbkUsS0FBS0ssT0FBTCxDQUFhOEMsSUFBYixHQUFvQmUsa0JBQWtCRSxPQUFsQixFQURwQjs7O2dCQUtJN0IsSUFBUixDQUFhdkMsS0FBS0ssT0FBbEIsRUFBMkJ5QixXQUFXdUMsU0FBWCxDQUFxQnJFLEtBQUtGLElBQTFCLENBQTNCLEVBQTRELFVBQVNrQyxHQUFULEVBQWN6QixJQUFkLEVBQW1CO2dCQUN2RXlCLE9BQU8sSUFBWCxFQUFpQjttQkFDVkEsR0FBSCxFQUFRekIsSUFBUjthQURKLE1BRU87O29CQUVDMkQsaUJBQUosRUFDSUEsa0JBQWtCSSxjQUFsQixDQUFpQy9ELElBQWpDOzttQkFFRHlCLEdBQUgsRUFBUXpCLElBQVI7O1NBUlI7O0NBMUJSLENBMENBOztBQzVDQSxhQUFlOzs7OztNQUFBLGdCQUtMRCxFQUxLLEVBS0Q7O1lBRUF1QixHQUFSLENBQVlDLFdBQVd5QyxTQUFYLEVBQVosRUFBb0NqRSxFQUFwQztHQVBTOzs7Ozs7OztRQUFBLGtCQWdCSFIsSUFoQkcsRUFnQkcwRSxTQWhCSCxFQWdCY2xFLEVBaEJkLEVBZ0JrQjs7UUFFdkJELFVBQVUsRUFBZDtZQUNRUCxJQUFSLElBQWdCMEUsU0FBaEI7O1lBRVFqQyxJQUFSLENBQWFsQyxPQUFiLEVBQXNCeUIsV0FBVzJDLFlBQVgsQ0FBd0IzRSxJQUF4QixDQUF0QixFQUFxRFEsRUFBckQ7O0NBckJOOztBQ0ZBLHFCQUFlOztVQUVSLENBQUMsUUFBRCxFQUNBLE1BREEsRUFFQSxVQUZBLEVBR0EsUUFIQSxFQUlBLFFBSkEsRUFLQSxZQUxBLEVBTUEsUUFOQSxFQU9BLFlBUEEsQ0FGUTs7b0JBV0UsQ0FBQyxRQUFELEVBQVcsUUFBWCxFQUFxQixZQUFyQixFQUFtQyxZQUFuQyxDQVhGOzttQkFhQyxDQUFDLFFBQUQsRUFBVyxRQUFYLEVBQXFCLFFBQXJCLEVBQStCLFFBQS9CLENBYkQ7O2tCQWVBLENBQUMsVUFBRDs7Q0FmZjs7QUNEQSxnQkFBZSxDQUFDO1FBQ1A7Q0FETSxFQUVYO1FBQ0s7Q0FITSxDQUFmOztBQ1FBLElBQUlvRSxXQUFXO2NBQUEsc0JBQ0M3RSxTQURELEVBQ1k7WUFDZkEsYUFBYW1ELFNBQWpCLEVBQTRCO2tCQUNsQix3QkFBTjs7ZUFFR25ELFNBQVAsR0FBbUJBLFNBQW5CO0tBTE87Z0JBQUEsMEJBUUs7ZUFDTEQsT0FBT0MsU0FBZDtLQVRPO2FBQUEsdUJBWUU7ZUFDRkEsU0FBUCxHQUFtQixJQUFuQjtlQUNPeUIsNEJBQVAsR0FBc0MsSUFBdEM7O0NBZFI7O0FBbUJBb0QsU0FBU0MsT0FBVCxHQUFtQi9FLE1BQW5CO0FBQ0E4RSxTQUFTRSxXQUFULEdBQXVCQSxXQUF2QjtBQUNBRixTQUFTVCxJQUFULEdBQWdCQSxJQUFoQjtBQUNBUyxTQUFTRyxNQUFULEdBQWtCQSxNQUFsQjtBQUNBSCxTQUFTSSxjQUFULEdBQTBCQSxjQUExQjtBQUNBSixTQUFTSyxTQUFULEdBQXFCQSxTQUFyQixDQUVBOzs7OyJ9
