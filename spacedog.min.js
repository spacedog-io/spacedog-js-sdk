(function (global, factory) {
     typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
     typeof define === 'function' && define.amd ? define(factory) :
     (global.SpaceDog = factory());
}(this, (function () { 'use strict';

var Config = {

    backendId: null,

    default_authorization_header: null

};

var qs = require('qs');

var UrlBuilder = {
    forLogin: function forLogin() {
        return Config.baseUrl + '/1/login';
    },
    forSchema: function forSchema() {
        return Config.baseUrl + '/1/schema';
    },
    forOneSchema: function forOneSchema(type) {
        return Config.baseUrl + '/1/schema/' + type;
    },
    forSearch: function forSearch(type) {
        return Config.baseUrl + '/1/search/' + type;
    },
    forCredentials: function forCredentials() {
        return Config.baseUrl + '/1/credentials';
    },
    forCredentialPassword: function forCredentialPassword(id) {
        return Config.baseUrl + '/1/credentials/' + id + '/password';
    },
    forCredentialForgotPassword: function forCredentialForgotPassword() {
        return Config.baseUrl + '/1/credentials/forgotPassword';
    },
    forCredentialResetPassword: function forCredentialResetPassword(credential_id, password_reset_code) {
        return Config.baseUrl + '/1/credentials/' + credential_id + '/password?passwordResetCode=' + password_reset_code;
    },
    forCredentialEnabled: function forCredentialEnabled(credential_id) {
        return Config.baseUrl + '/1/credentials/' + credential_id + '/enabled';
    },
    forData: function forData(type) {
        return Config.baseUrl + '/1/data/' + type;
    },
    forDataObject: function forDataObject(type, id, opts) {
        var url = Config.baseUrl + '/1/data/' + type + '/' + id;
        if (opts) {
            return url + '?' + qs.stringify(opts);
        }
        return url;
    }
};

var _xend = function _xend(method, payload, url, cb, opts) {

    var data = null;
    if (payload) {
        data = JSON.stringify(payload);
    }

    var xhr = new XMLHttpRequest();

    xhr.onreadystatechange = function () {
        if (xhr.readyState === 4) {
            try {
                var json = JSON.parse(xhr.responseText);

                // console.log("-----\nSpaceDog.Xhr# (",xhr.url,") SUCCESS, json is : ", json, "\n------\n")

                if (json != null && (json.success == false || !(xhr.status >= 200 && xhr.status < 300))) {
                    cb(json, null);
                } else {
                    cb(null, json);
                }
            } catch (e) {
                console.warn("-----\nSpaceDog.Xhr# could not parse xhr.responseText (=", xhr.responseText, ") \n\n (xhr.url=", xhr.url, ") \n\n (xhr.method=", xhr.method, ") \n\n (xhr=", xhr, ") and therefore not able to 1/ set authorization headers 2/ remember user token, if rememberMe is true\n\nPossibly something else. Check the caught exeption:\n\n", e, "\n\n-------\n");
                cb(xhr.responseText, null);
            }
        }
    };

    xhr.open(method, url);
    xhr.setRequestHeader("content-type", "application/json;charset=UTF-8");

    if (opts && opts.authorization) {
        xhr.setRequestHeader("authorization", opts.authorization);
    } else if (Config.default_authorization_header != null) {
        xhr.setRequestHeader("authorization", Config.default_authorization_header);
    }

    if (data == null) {
        xhr.send();
    } else {
        xhr.send(data);
    }
};

var UtilXHR = {
    get: function get(url, cb) {
        _xend("GET", null, url, cb);
    },
    post: function post(payload, url, cb) {
        _xend("POST", payload, url, cb);
    },
    put: function put(payload, url, cb, opts) {
        _xend("PUT", payload, url, cb, opts);
    },
    delete: function _delete(url, cb) {
        _xend("DELETE", null, url, cb);
    }
};

var Credentials = {
    /**
     * opts : { username:string, password:string, rememberMe:bool }
     * cb : callback function
     */
    login: function login(opts, cb) {

        try {
            Config.default_authorization_header = "Basic " + new Buffer(opts.username + ":" + opts.password).toString('base64');
        } catch (e) {
            Config.default_authorization_header = "Basic " + btoa(opts.username + ":" + opts.password);
        }

        UtilXHR.get(UrlBuilder.forLogin(), function (err, data) {

            if (err != null) {

                Config.default_authorization_header = null;
            } else {

                Config.default_authorization_header = "Bearer " + data.accessToken;

                if (opts.rememberMe) {

                    localStorage.setItem('SPACEDOG_CREDENTIALS_TOKEN', JSON.stringify({
                        "accessToken": data.accessToken,
                        "backendId": Config.backendId,
                        "baseUrl": Config.baseUrl
                    }));
                }
            }

            cb(err, data);
        });
    },
    loginWithSavedCredentials: function loginWithSavedCredentials(cb) {

        var saved = JSON.parse(localStorage.getItem('SPACEDOG_CREDENTIALS_TOKEN'));

        Config.backendId = saved.backendId;
        Config.baseUrl = saved.baseUrl;
        Config.default_authorization_header = "Bearer " + saved.accessToken;

        UtilXHR.get(UrlBuilder.forLogin(), function (err, data) {

            if (err == null) {
                if (data && data.accessToken) {
                    Config.default_authorization_header = "Bearer " + data.accessToken;
                }
            }

            cb(err, data);
        });
    },
    createUser: function createUser(opts, cb) {

        UtilXHR.post({
            username: opts.credentials.username,
            password: opts.credentials.password,
            email: opts.credentials.email
        }, UrlBuilder.forCredentials(), function (err, data) {

            if (err == null) {

                var userPayload = opts.user.payload;

                userPayload[opts.user.credentialIdField] = data.id;

                UtilXHR.post(opts.user.payload, UrlBuilder.forData(opts.user.type), function (err, data) {
                    if (err == null) {

                        userPayload.username = opts.credentials.username;
                        userPayload.email = opts.credentials.email;
                        userPayload.meta = {
                            id: data.id
                        };

                        cb(null, userPayload);
                    } else {
                        cb(err, null);
                    }
                });
            } else {

                cb(err, null);
            }
        });
    },
    forget: function forget() {
        Config.default_authorization_header = null;
        localStorage.removeItem('SPACEDOG_CREDENTIALS_TOKEN');
    },
    getRememberedState: function getRememberedState() {
        return JSON.parse(localStorage.getItem('SPACEDOG_CREDENTIALS_TOKEN'));
    },
    canTryLogin: function canTryLogin() {
        return localStorage.getItem('SPACEDOG_CREDENTIALS_TOKEN') != undefined && localStorage.getItem('SPACEDOG_CREDENTIALS_TOKEN') != null;
    },
    updatePassword: function updatePassword(opts, cb) {

        UtilXHR.put(opts.newPassword, UrlBuilder.forCredentialPassword(opts.credentialId), function (err, data) {
            if (err == null) {
                cb(null, data);
            } else {
                cb(err, null);
            }
        }, {
            'authorization': 'Basic ' + btoa(opts.challengedUsername + ":" + opts.challengedPassword)
        });
    },
    forgotPassword: function forgotPassword(opts, cb) {
        UtilXHR.post(opts, UrlBuilder.forCredentialForgotPassword(), function (err, data) {
            if (err == null) {
                cb(null, data);
            } else {
                cb(err, null);
            }
        });
    },
    resetPassword: function resetPassword(opts, cb) {
        UtilXHR.post({ password: opts.password }, UrlBuilder.forCredentialResetPassword(opts.credentialId, opts.passwordResetCode), function (err, data) {
            if (err == null) {
                cb(null, data);
            } else {
                cb(err, null);
            }
        });
    },
    unblockAccount: function unblockAccount(opts, cb) {
        UtilXHR.put(true, UrlBuilder.forCredentialEnabled(opts.credentialId), function (err, data) {
            if (err == null) {
                cb(null, data);
            } else {
                cb(err, null);
            }
        });
    }
};

var classCallCheck = function (instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
};

var createClass = function () {
  function defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];
      descriptor.enumerable = descriptor.enumerable || false;
      descriptor.configurable = true;
      if ("value" in descriptor) descriptor.writable = true;
      Object.defineProperty(target, descriptor.key, descriptor);
    }
  }

  return function (Constructor, protoProps, staticProps) {
    if (protoProps) defineProperties(Constructor.prototype, protoProps);
    if (staticProps) defineProperties(Constructor, staticProps);
    return Constructor;
  };
}();

var PaginationSession = function () {
    function PaginationSession(from, size) {
        classCallCheck(this, PaginationSession);

        this._from = from;
        this._size = size;
        this._total = null;
    }

    createClass(PaginationSession, [{
        key: "isNextPageAvailable",
        value: function isNextPageAvailable() {
            if (this._total == null) {
                return true;
            }
            return this._from + this._size < this._total;
        }
    }, {
        key: "isPrevPageAvailable",
        value: function isPrevPageAvailable() {
            if (this._total == null) {
                return false;
            }
            return this._from >= this._size;
        }
    }, {
        key: "_newPageLoaded",
        value: function _newPageLoaded(result) {
            this._total = result.total;
        }
    }, {
        key: "pointNextPage",
        value: function pointNextPage() {
            this._from += this._size;
        }
    }, {
        key: "pointPrevPage",
        value: function pointPrevPage() {
            this._from -= this._size;
        }
    }, {
        key: "getFrom",
        value: function getFrom() {
            return this._from;
        }
    }, {
        key: "getSize",
        value: function getSize() {
            return this._size;
        }
    }]);
    return PaginationSession;
}();

var Object$1 = function () {
  function Object(type, id, payload) {
    classCallCheck(this, Object);

    this._type = type;
    this._id = id;
    this._payload = payload;
  }

  createClass(Object, [{
    key: 'create',
    value: function create(cb) {
      var ret = this._payload;
      UtilXHR.post(this._payload, UrlBuilder.forData(this._type), function (err, data) {

        if (data) {
          ret.meta = {
            id: data.id
          };
        }

        cb(err, ret);
      });
    }
  }, {
    key: 'update',
    value: function update(cb, opts) {
      UtilXHR.put(this._payload, UrlBuilder.forDataObject(this._type, this._id, opts), cb);
    }
  }, {
    key: 'delete',
    value: function _delete(cb) {
      UtilXHR.delete(UrlBuilder.forDataObject(this._type, this._id), cb);
    }
  }, {
    key: 'get',
    value: function get$$1(cb) {
      UtilXHR.get(UrlBuilder.forDataObject(this._type, this._id), cb);
    }
  }]);
  return Object;
}();

var Data = {

    PaginationSession: PaginationSession,

    buildObject: function buildObject(type, id, payload) {
        return new Object$1(type, id, payload);
    },


    /**
     * opts : { type:string }
     * cb : callback function
     * paginationSession : optional paginationSession
     */
    search: function search(opts, cb, paginationSession) {

        if (opts.payload == undefined) {
            opts.payload = {};
        }

        if (paginationSession) {

            opts.payload.from = paginationSession.getFrom(), opts.payload.size = paginationSession.getSize();
        }

        UtilXHR.post(opts.payload, UrlBuilder.forSearch(opts.type), function (err, data) {
            if (err != null) {
                cb(err, data);
            } else {

                if (paginationSession) paginationSession._newPageLoaded(data);

                cb(err, data);
            }
        });
    }
};

var Schema = {

  /**
   * cb : callback function
   */
  list: function list(cb) {

    UtilXHR.get(UrlBuilder.forSchema(), cb);
  },


  /**
   * type : string, the name of the schema
   * schemaDef : content for the new schema : _acl and other elastic search attributes
   * cb : callback function
   */
  create: function create(type, schemaDef, cb) {

    var payload = {};
    payload[type] = schemaDef;

    UtilXHR.post(payload, UrlBuilder.forOneSchema(type), cb);
  }
};

var DataPermission = {

     all: ['create', 'read', 'read_all', 'search', 'update', 'update_all', 'delete', 'delete_all'],

     default_admin: ['create', 'search', 'update_all', 'delete_all'],

     default_user: ['create', 'search', 'update', 'delete'],

     default_key: ['read_all']

};

var DataTypes = [{
  name: 'string'
}, {
  name: 'boolean'
}];

var SpaceDog = {
    initialize: function initialize(backendId) {
        if (backendId == undefined) {
            throw "BackendId is required.";
        }
        Config.backendId = backendId;
        Config.baseUrl = 'https://' + Config.backendId + '.spacedog.io';
    },
    initializeWithBaseUrl: function initializeWithBaseUrl(baseUrl) {
        if (baseUrl == undefined) {
            throw "BaseUrl is required.";
        }
        Config.backendId = null;
        Config.baseUrl = baseUrl;
    },
    getBaseUrl: function getBaseUrl() {
        return Config.baseUrl;
    },
    getBackendId: function getBackendId() {
        return Config.backendId;
    },
    forgetAll: function forgetAll() {
        Config.backendId = null;
        Config.baseUrl = null;
        Config.default_authorization_header = null;
    }
};

SpaceDog._Config = Config; // pas en release ?
SpaceDog.Credentials = Credentials;
SpaceDog.Data = Data;
SpaceDog.Schema = Schema;
SpaceDog.DataPermission = DataPermission;
SpaceDog.DataTypes = DataTypes;

return SpaceDog;

})));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbInNyYy9saWIvY29uZmlnLmpzIiwic3JjL2xpYi91cmxCdWlsZGVyLmpzIiwic3JjL2xpYi91dGlsWGhyLmpzIiwic3JjL2xpYi9jcmVkZW50aWFscy5qcyIsInNyYy9saWIvcGFnaW5hdGlvblNlc3Npb24uanMiLCJzcmMvbGliL29iamVjdC5qcyIsInNyYy9saWIvZGF0YS5qcyIsInNyYy9saWIvc2NoZW1hLmpzIiwic3JjL2xpYi9kYXRhUGVybWlzc2lvbi5qcyIsInNyYy9saWIvZGF0YVR5cGVzLmpzIiwic3JjL3NwYWNlZG9nLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IHtcblxuICAgIGJhY2tlbmRJZDpudWxsLFxuXG4gICAgZGVmYXVsdF9hdXRob3JpemF0aW9uX2hlYWRlcjpudWxsXG5cbn0iLCJpbXBvcnQgQ29uZmlnIGZyb20gJy4vY29uZmlnLmpzJ1xuaW1wb3J0IGNyZWRlbnRpYWxzIGZyb20gXCIuL2NyZWRlbnRpYWxzXCI7XG52YXIgcXMgPSByZXF1aXJlKCdxcycpO1xuXG5leHBvcnQgZGVmYXVsdCB7XG5cbiAgICBmb3JMb2dpbiAoKSB7XG4gICAgICAgIHJldHVybiBgJHtDb25maWcuYmFzZVVybH0vMS9sb2dpbmBcbiAgICB9LFxuXG4gICAgZm9yU2NoZW1hICgpIHtcbiAgICAgICAgcmV0dXJuIGAke0NvbmZpZy5iYXNlVXJsfS8xL3NjaGVtYWAgIFxuICAgIH0sXG5cbiAgICBmb3JPbmVTY2hlbWEgKHR5cGUpIHtcbiAgICAgICAgcmV0dXJuIGAke0NvbmZpZy5iYXNlVXJsfS8xL3NjaGVtYS8ke3R5cGV9YCAgXG4gICAgfSxcblxuICAgIGZvclNlYXJjaCAodHlwZSkge1xuICAgICAgICByZXR1cm4gYCR7Q29uZmlnLmJhc2VVcmx9LzEvc2VhcmNoLyR7dHlwZX1gXG4gICAgfSxcblxuICAgIGZvckNyZWRlbnRpYWxzICgpIHtcbiAgICAgICAgcmV0dXJuIGAke0NvbmZpZy5iYXNlVXJsfS8xL2NyZWRlbnRpYWxzYFxuICAgIH0sXG5cbiAgICBmb3JDcmVkZW50aWFsUGFzc3dvcmQgKGlkKSB7XG4gICAgICAgIHJldHVybiBgJHtDb25maWcuYmFzZVVybH0vMS9jcmVkZW50aWFscy8ke2lkfS9wYXNzd29yZGBcbiAgICB9LFxuXG4gICAgZm9yQ3JlZGVudGlhbEZvcmdvdFBhc3N3b3JkICgpIHtcbiAgICAgICAgcmV0dXJuIGAke0NvbmZpZy5iYXNlVXJsfS8xL2NyZWRlbnRpYWxzL2ZvcmdvdFBhc3N3b3JkYFxuICAgIH0sXG5cbiAgICBmb3JDcmVkZW50aWFsUmVzZXRQYXNzd29yZCAoY3JlZGVudGlhbF9pZCwgcGFzc3dvcmRfcmVzZXRfY29kZSkge1xuICAgICAgICByZXR1cm4gYCR7Q29uZmlnLmJhc2VVcmx9LzEvY3JlZGVudGlhbHMvJHtjcmVkZW50aWFsX2lkfS9wYXNzd29yZD9wYXNzd29yZFJlc2V0Q29kZT0ke3Bhc3N3b3JkX3Jlc2V0X2NvZGV9YFxuICAgIH0sXG5cbiAgICBmb3JDcmVkZW50aWFsRW5hYmxlZCAoY3JlZGVudGlhbF9pZCkge1xuICAgICAgICByZXR1cm4gYCR7Q29uZmlnLmJhc2VVcmx9LzEvY3JlZGVudGlhbHMvJHtjcmVkZW50aWFsX2lkfS9lbmFibGVkYFxuICAgIH0sXG5cbiAgICBmb3JEYXRhICh0eXBlKSB7XG4gICAgICAgIHJldHVybiBgJHtDb25maWcuYmFzZVVybH0vMS9kYXRhLyR7dHlwZX1gXG4gICAgfSxcblxuICAgIGZvckRhdGFPYmplY3QgKHR5cGUsIGlkLCBvcHRzKSB7XG4gICAgICAgIHZhciB1cmwgPSBgJHtDb25maWcuYmFzZVVybH0vMS9kYXRhLyR7dHlwZX0vJHtpZH1gXG4gICAgICAgIGlmIChvcHRzKSB7XG4gICAgICAgICAgICByZXR1cm4gYCR7dXJsfT8ke3FzLnN0cmluZ2lmeShvcHRzKX1gXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVybFxuICAgIH0sXG5cbn0iLCJpbXBvcnQgQ29uZmlnIGZyb20gJy4vY29uZmlnJ1xuXG52YXIgX3hlbmQgPSBmdW5jdGlvbihtZXRob2QsIHBheWxvYWQsIHVybCwgY2IsIG9wdHMpe1xuXG4gICAgdmFyIGRhdGEgPSBudWxsO1xuICAgIGlmIChwYXlsb2FkKSB7XG4gICAgICAgIGRhdGEgPSBKU09OLnN0cmluZ2lmeShwYXlsb2FkKTtcbiAgICB9XG5cbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSA0KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIganNvbiA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG5cbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiLS0tLS1cXG5TcGFjZURvZy5YaHIjIChcIix4aHIudXJsLFwiKSBTVUNDRVNTLCBqc29uIGlzIDogXCIsIGpzb24sIFwiXFxuLS0tLS0tXFxuXCIpXG5cbiAgICAgICAgICAgIGlmIChqc29uICE9IG51bGwgJiYgKGpzb24uc3VjY2Vzcz09ZmFsc2UgfHwgISh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgMzAwICkpKSB7XG4gICAgICAgICAgICAgICAgY2IoanNvbiwgbnVsbClcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYihudWxsLCBqc29uKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIi0tLS0tXFxuU3BhY2VEb2cuWGhyIyBjb3VsZCBub3QgcGFyc2UgeGhyLnJlc3BvbnNlVGV4dCAoPVwiLHhoci5yZXNwb25zZVRleHQsXCIpIFxcblxcbiAoeGhyLnVybD1cIix4aHIudXJsLFwiKSBcXG5cXG4gKHhoci5tZXRob2Q9XCIseGhyLm1ldGhvZCxcIikgXFxuXFxuICh4aHI9XCIseGhyLFwiKSBhbmQgdGhlcmVmb3JlIG5vdCBhYmxlIHRvIDEvIHNldCBhdXRob3JpemF0aW9uIGhlYWRlcnMgMi8gcmVtZW1iZXIgdXNlciB0b2tlbiwgaWYgcmVtZW1iZXJNZSBpcyB0cnVlXFxuXFxuUG9zc2libHkgc29tZXRoaW5nIGVsc2UuIENoZWNrIHRoZSBjYXVnaHQgZXhlcHRpb246XFxuXFxuXCIsIGUsXCJcXG5cXG4tLS0tLS0tXFxuXCIpXG4gICAgICAgICAgICBjYih4aHIucmVzcG9uc2VUZXh0LCBudWxsKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgeGhyLm9wZW4obWV0aG9kLCB1cmwpO1xuICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiY29udGVudC10eXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuXG4gICAgaWYgKG9wdHMgJiYgb3B0cy5hdXRob3JpemF0aW9uKSB7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiYXV0aG9yaXphdGlvblwiLCBvcHRzLmF1dGhvcml6YXRpb24pXG4gICAgfSBlbHNlIGlmIChDb25maWcuZGVmYXVsdF9hdXRob3JpemF0aW9uX2hlYWRlciAhPSBudWxsKSB7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiYXV0aG9yaXphdGlvblwiLCBDb25maWcuZGVmYXVsdF9hdXRob3JpemF0aW9uX2hlYWRlcilcbiAgICB9XG5cbiAgICBpZiAoZGF0YSA9PSBudWxsKSB7XG4gICAgICAgIHhoci5zZW5kKClcbiAgICB9IGVsc2Uge1xuICAgICAgICB4aHIuc2VuZChkYXRhKTtcbiAgICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIGdldCAodXJsLCBjYikge1xuICAgICAgICBfeGVuZChcIkdFVFwiLCBudWxsLCB1cmwsIGNiKVxuICAgIH0sXG5cbiAgICBwb3N0IChwYXlsb2FkLCB1cmwsIGNiKSB7XG4gICAgICAgIF94ZW5kKFwiUE9TVFwiLCBwYXlsb2FkLCB1cmwsIGNiKVxuICAgIH0sXG5cbiAgICBwdXQgKHBheWxvYWQsIHVybCwgY2IsIG9wdHMpIHtcbiAgICAgICAgX3hlbmQoXCJQVVRcIiwgcGF5bG9hZCwgdXJsLCBjYiwgb3B0cylcbiAgICB9LFxuXG4gICAgZGVsZXRlICh1cmwsIGNiKSB7XG4gICAgICAgIF94ZW5kKFwiREVMRVRFXCIsIG51bGwsIHVybCwgY2IpXG4gICAgfSxcbn0iLCJpbXBvcnQgVXJsQnVpbGRlciBmcm9tICcuL3VybEJ1aWxkZXIuanMnXG5pbXBvcnQgQ29uZmlnIGZyb20gJy4vY29uZmlnLmpzJ1xuaW1wb3J0IFV0aWxYSFIgZnJvbSAnLi91dGlsWGhyJ1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgLyoqXG4gICAgICogb3B0cyA6IHsgdXNlcm5hbWU6c3RyaW5nLCBwYXNzd29yZDpzdHJpbmcsIHJlbWVtYmVyTWU6Ym9vbCB9XG4gICAgICogY2IgOiBjYWxsYmFjayBmdW5jdGlvblxuICAgICAqL1xuICAgIGxvZ2luIChvcHRzLCBjYikge1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDb25maWcuZGVmYXVsdF9hdXRob3JpemF0aW9uX2hlYWRlciA9IFwiQmFzaWMgXCIrbmV3IEJ1ZmZlcihvcHRzLnVzZXJuYW1lK1wiOlwiK29wdHMucGFzc3dvcmQpLnRvU3RyaW5nKCdiYXNlNjQnKVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBDb25maWcuZGVmYXVsdF9hdXRob3JpemF0aW9uX2hlYWRlciA9IFwiQmFzaWMgXCIrYnRvYShvcHRzLnVzZXJuYW1lK1wiOlwiK29wdHMucGFzc3dvcmQpXG4gICAgICAgIH1cblxuICAgICAgICBVdGlsWEhSLmdldChVcmxCdWlsZGVyLmZvckxvZ2luKCksIGZ1bmN0aW9uKGVyciwgZGF0YSkge1xuXG4gICAgICAgICAgICBpZiAoZXJyICE9IG51bGwpIHtcblxuICAgICAgICAgICAgICAgIENvbmZpZy5kZWZhdWx0X2F1dGhvcml6YXRpb25faGVhZGVyID0gbnVsbCAgICAgICAgICAgICAgICBcblxuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIENvbmZpZy5kZWZhdWx0X2F1dGhvcml6YXRpb25faGVhZGVyID0gXCJCZWFyZXIgXCIrZGF0YS5hY2Nlc3NUb2tlblxuXG4gICAgICAgICAgICAgICAgaWYgKG9wdHMucmVtZW1iZXJNZSkge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdTUEFDRURPR19DUkVERU5USUFMU19UT0tFTicsIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgXCJhY2Nlc3NUb2tlblwiOmRhdGEuYWNjZXNzVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIFwiYmFja2VuZElkXCI6Q29uZmlnLmJhY2tlbmRJZCxcbiAgICAgICAgICAgICAgICAgICAgXCJiYXNlVXJsXCI6Q29uZmlnLmJhc2VVcmxcbiAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2IoZXJyLCBkYXRhKVxuXG4gICAgICAgIH0pXG5cbiAgICB9LFxuXG4gICAgbG9naW5XaXRoU2F2ZWRDcmVkZW50aWFscyAoY2IpICB7XG5cbiAgICAgICAgdmFyIHNhdmVkID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnU1BBQ0VET0dfQ1JFREVOVElBTFNfVE9LRU4nKSlcblxuICAgICAgICBDb25maWcuYmFja2VuZElkID0gc2F2ZWQuYmFja2VuZElkXG4gICAgICAgIENvbmZpZy5iYXNlVXJsID0gc2F2ZWQuYmFzZVVybFxuICAgICAgICBDb25maWcuZGVmYXVsdF9hdXRob3JpemF0aW9uX2hlYWRlciA9IFwiQmVhcmVyIFwiK3NhdmVkLmFjY2Vzc1Rva2VuXG5cbiAgICAgICAgVXRpbFhIUi5nZXQoVXJsQnVpbGRlci5mb3JMb2dpbigpLCBmdW5jdGlvbihlcnIsIGRhdGEpIHtcblxuICAgICAgICAgICAgaWYgKGVyciA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5hY2Nlc3NUb2tlbikge1xuICAgICAgICAgICAgICAgICAgICBDb25maWcuZGVmYXVsdF9hdXRob3JpemF0aW9uX2hlYWRlciA9IFwiQmVhcmVyIFwiK2RhdGEuYWNjZXNzVG9rZW5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gXG4gICAgICAgICAgICBjYihlcnIsIGRhdGEpXG5cbiAgICAgICAgfSlcblxuICAgIH0sXG5cbiAgICBjcmVhdGVVc2VyIChvcHRzLCBjYikge1xuXG4gICAgICAgIFV0aWxYSFIucG9zdCh7XG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6IG9wdHMuY3JlZGVudGlhbHMudXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IG9wdHMuY3JlZGVudGlhbHMucGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgZW1haWw6IG9wdHMuY3JlZGVudGlhbHMuZW1haWwsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgVXJsQnVpbGRlci5mb3JDcmVkZW50aWFscygpLFxuICAgICAgICAgICAgZnVuY3Rpb24oZXJyLCBkYXRhKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoZXJyID09IG51bGwpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgdXNlclBheWxvYWQgPSBvcHRzLnVzZXIucGF5bG9hZFxuXG4gICAgICAgICAgICAgICAgICAgIHVzZXJQYXlsb2FkW29wdHMudXNlci5jcmVkZW50aWFsSWRGaWVsZF0gPSBkYXRhLmlkXG5cbiAgICAgICAgICAgICAgICAgICAgVXRpbFhIUi5wb3N0KG9wdHMudXNlci5wYXlsb2FkLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIFVybEJ1aWxkZXIuZm9yRGF0YShvcHRzLnVzZXIudHlwZSksIFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyLCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVyciA9PSBudWxsKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlclBheWxvYWQudXNlcm5hbWUgPSBvcHRzLmNyZWRlbnRpYWxzLnVzZXJuYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJQYXlsb2FkLmVtYWlsID0gb3B0cy5jcmVkZW50aWFscy5lbWFpbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyUGF5bG9hZC5tZXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ZGF0YS5pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYiAobnVsbCwgdXNlclBheWxvYWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2IgKGVyciwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIGNiKGVyciwgbnVsbCk7XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgIH0sXG5cblxuICAgIGZvcmdldCAoKSB7XG4gICAgICAgIENvbmZpZy5kZWZhdWx0X2F1dGhvcml6YXRpb25faGVhZGVyID0gbnVsbFxuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnU1BBQ0VET0dfQ1JFREVOVElBTFNfVE9LRU4nKVxuICAgIH0sXG5cbiAgICBnZXRSZW1lbWJlcmVkU3RhdGUgKCkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnU1BBQ0VET0dfQ1JFREVOVElBTFNfVE9LRU4nKSlcbiAgICB9LFxuXG4gICAgY2FuVHJ5TG9naW4gKCkge1xuICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ1NQQUNFRE9HX0NSRURFTlRJQUxTX1RPS0VOJykhPXVuZGVmaW5lZCAmJiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnU1BBQ0VET0dfQ1JFREVOVElBTFNfVE9LRU4nKSE9bnVsbFxuICAgIH0sXG5cblxuICAgIHVwZGF0ZVBhc3N3b3JkIChvcHRzLCBjYikge1xuXG5cbiAgICAgICAgVXRpbFhIUi5wdXQob3B0cy5uZXdQYXNzd29yZCwgVXJsQnVpbGRlci5mb3JDcmVkZW50aWFsUGFzc3dvcmQob3B0cy5jcmVkZW50aWFsSWQpLCBmdW5jdGlvbihlcnIsIGRhdGEpe1xuICAgICAgICAgICAgaWYgKGVyciA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY2IobnVsbCwgZGF0YSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2IoZXJyLCBudWxsKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgICdhdXRob3JpemF0aW9uJzogJ0Jhc2ljICcrYnRvYShvcHRzLmNoYWxsZW5nZWRVc2VybmFtZStcIjpcIitvcHRzLmNoYWxsZW5nZWRQYXNzd29yZClcbiAgICAgICAgfSlcblxuICAgIH0sXG5cbiAgICBmb3Jnb3RQYXNzd29yZCAob3B0cywgY2IpIHtcbiAgICAgICAgVXRpbFhIUi5wb3N0KG9wdHMsIFVybEJ1aWxkZXIuZm9yQ3JlZGVudGlhbEZvcmdvdFBhc3N3b3JkKCksIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHtcbiAgICAgICAgICAgIGlmIChlcnIgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNiIChudWxsLCBkYXRhKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYiAoZXJyLCBudWxsKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0sXG5cbiAgICByZXNldFBhc3N3b3JkIChvcHRzLCBjYikge1xuICAgICAgICBVdGlsWEhSLnBvc3Qoe3Bhc3N3b3JkOiBvcHRzLnBhc3N3b3JkfSwgVXJsQnVpbGRlci5mb3JDcmVkZW50aWFsUmVzZXRQYXNzd29yZChvcHRzLmNyZWRlbnRpYWxJZCwgb3B0cy5wYXNzd29yZFJlc2V0Q29kZSksIGZ1bmN0aW9uKGVyciwgZGF0YSkge1xuICAgICAgICAgICAgaWYgKGVyciA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY2IgKG51bGwsIGRhdGEpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNiIChlcnIsIG51bGwpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSxcblxuICAgIHVuYmxvY2tBY2NvdW50IChvcHRzLCBjYikge1xuICAgICAgICBVdGlsWEhSLnB1dCh0cnVlLCBVcmxCdWlsZGVyLmZvckNyZWRlbnRpYWxFbmFibGVkKG9wdHMuY3JlZGVudGlhbElkKSwgZnVuY3Rpb24gKGVyciwgZGF0YSkge1xuICAgICAgICAgICAgaWYgKGVyciA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY2IgKG51bGwsIGRhdGEpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNiIChlcnIsIG51bGwpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxufSIsIlxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFnaW5hdGlvblNlc3Npb24ge1xuXG4gICAgY29uc3RydWN0b3IgKGZyb20sIHNpemUpIHtcbiAgICAgICAgdGhpcy5fZnJvbSA9IGZyb21cbiAgICAgICAgdGhpcy5fc2l6ZSA9IHNpemVcbiAgICAgICAgdGhpcy5fdG90YWwgPSBudWxsXG4gICAgfVxuXG4gICAgaXNOZXh0UGFnZUF2YWlsYWJsZSAoKSB7XG4gICAgICAgIGlmICh0aGlzLl90b3RhbCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9mcm9tICsgdGhpcy5fc2l6ZSA8IHRoaXMuX3RvdGFsXG4gICAgfVxuXG5cbiAgICBpc1ByZXZQYWdlQXZhaWxhYmxlICgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3RvdGFsID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9mcm9tID49IHRoaXMuX3NpemVcbiAgICB9XG5cbiAgICBfbmV3UGFnZUxvYWRlZCAocmVzdWx0KSB7XG4gICAgICAgIHRoaXMuX3RvdGFsID0gcmVzdWx0LnRvdGFsXG4gICAgfVxuXG4gICAgcG9pbnROZXh0UGFnZSAoKSB7XG4gICAgICAgIHRoaXMuX2Zyb20gKz0gdGhpcy5fc2l6ZVxuICAgIH1cblxuICAgIHBvaW50UHJldlBhZ2UgKCkge1xuICAgICAgICB0aGlzLl9mcm9tIC09IHRoaXMuX3NpemVcbiAgICB9XG5cbiAgICBnZXRGcm9tICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zyb21cbiAgICB9XG5cbiAgICBnZXRTaXplICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NpemVcbiAgICB9XG5cbn0iLCJpbXBvcnQgVXJsQnVpbGRlciBmcm9tICcuL3VybEJ1aWxkZXInXG5pbXBvcnQgVXRpbFhIUiBmcm9tICcuL3V0aWxYaHInXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9iamVjdCB7XG5cbiAgY29uc3RydWN0b3IgKHR5cGUsIGlkLCBwYXlsb2FkKSB7XG4gICAgdGhpcy5fdHlwZSA9IHR5cGVcbiAgICB0aGlzLl9pZCA9IGlkXG4gICAgdGhpcy5fcGF5bG9hZCA9IHBheWxvYWRcbiAgfVxuXG4gIGNyZWF0ZSAoY2IpIHtcbiAgICB2YXIgcmV0ID0gdGhpcy5fcGF5bG9hZDtcbiAgICBVdGlsWEhSLnBvc3QodGhpcy5fcGF5bG9hZCwgVXJsQnVpbGRlci5mb3JEYXRhKHRoaXMuX3R5cGUpLCBmdW5jdGlvbihlcnIsIGRhdGEpe1xuXG4gICAgICBpZiAoZGF0YSkge1xuICAgICAgICByZXQubWV0YSA9IHtcbiAgICAgICAgICBpZDogZGF0YS5pZFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNiKGVyciwgcmV0KVxuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlIChjYiwgb3B0cykge1xuICAgIFV0aWxYSFIucHV0KHRoaXMuX3BheWxvYWQsIFVybEJ1aWxkZXIuZm9yRGF0YU9iamVjdCh0aGlzLl90eXBlLCB0aGlzLl9pZCwgb3B0cyksIGNiKVxuICB9XG5cbiAgZGVsZXRlIChjYikge1xuICAgIFV0aWxYSFIuZGVsZXRlKFVybEJ1aWxkZXIuZm9yRGF0YU9iamVjdCh0aGlzLl90eXBlLCB0aGlzLl9pZCksIGNiKVxuICB9XG5cbiAgZ2V0IChjYikge1xuICAgIFV0aWxYSFIuZ2V0KFVybEJ1aWxkZXIuZm9yRGF0YU9iamVjdCh0aGlzLl90eXBlLCB0aGlzLl9pZCksIGNiKVxuICB9XG5cbn0iLCJpbXBvcnQgVXJsQnVpbGRlciBmcm9tICcuL3VybEJ1aWxkZXInXG5pbXBvcnQgVXRpbFhIUiBmcm9tICcuL3V0aWxYaHInXG5pbXBvcnQgUGFnaW5hdGlvblNlc3Npb24gZnJvbSAnLi9wYWdpbmF0aW9uU2Vzc2lvbidcbmltcG9ydCBPYmplY3QgZnJvbSAnLi9vYmplY3QnXG5cbnZhciBEYXRhID0ge1xuICAgICBcbiAgICBQYWdpbmF0aW9uU2Vzc2lvbixcblxuICAgIGJ1aWxkT2JqZWN0ICh0eXBlLCBpZCwgcGF5bG9hZCkge1xuICAgICAgcmV0dXJuIG5ldyBPYmplY3QgKHR5cGUsIGlkLCBwYXlsb2FkKVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBvcHRzIDogeyB0eXBlOnN0cmluZyB9XG4gICAgICogY2IgOiBjYWxsYmFjayBmdW5jdGlvblxuICAgICAqIHBhZ2luYXRpb25TZXNzaW9uIDogb3B0aW9uYWwgcGFnaW5hdGlvblNlc3Npb25cbiAgICAgKi9cbiAgICBzZWFyY2ggKG9wdHMsIGNiLCBwYWdpbmF0aW9uU2Vzc2lvbikge1xuXG4gICAgICAgIGlmIChvcHRzLnBheWxvYWQgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvcHRzLnBheWxvYWQgPSB7fVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBhZ2luYXRpb25TZXNzaW9uKSB7XG5cbiAgICAgICAgICAgIG9wdHMucGF5bG9hZC5mcm9tID0gcGFnaW5hdGlvblNlc3Npb24uZ2V0RnJvbSgpLFxuICAgICAgICAgICAgb3B0cy5wYXlsb2FkLnNpemUgPSBwYWdpbmF0aW9uU2Vzc2lvbi5nZXRTaXplKClcblxuICAgICAgICB9XG5cbiAgICAgICAgVXRpbFhIUi5wb3N0KG9wdHMucGF5bG9hZCwgVXJsQnVpbGRlci5mb3JTZWFyY2gob3B0cy50eXBlKSwgZnVuY3Rpb24oZXJyLCBkYXRhKXtcbiAgICAgICAgICAgIGlmIChlcnIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNiKGVyciwgZGF0YSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgaWYgKHBhZ2luYXRpb25TZXNzaW9uKVxuICAgICAgICAgICAgICAgICAgICBwYWdpbmF0aW9uU2Vzc2lvbi5fbmV3UGFnZUxvYWRlZChkYXRhKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNiKGVyciwgZGF0YSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGF0YSIsImltcG9ydCBVcmxCdWlsZGVyIGZyb20gJy4vdXJsQnVpbGRlci5qcydcbmltcG9ydCBVdGlsWEhSIGZyb20gJy4vdXRpbFhoci5qcydcblxuZXhwb3J0IGRlZmF1bHQge1xuXG4gICAgLyoqXG4gICAgICogY2IgOiBjYWxsYmFjayBmdW5jdGlvblxuICAgICAqL1xuICAgIGxpc3QgKGNiKSB7XG5cbiAgICAgIFV0aWxYSFIuZ2V0KFVybEJ1aWxkZXIuZm9yU2NoZW1hKCksIGNiKVxuXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHR5cGUgOiBzdHJpbmcsIHRoZSBuYW1lIG9mIHRoZSBzY2hlbWFcbiAgICAgKiBzY2hlbWFEZWYgOiBjb250ZW50IGZvciB0aGUgbmV3IHNjaGVtYSA6IF9hY2wgYW5kIG90aGVyIGVsYXN0aWMgc2VhcmNoIGF0dHJpYnV0ZXNcbiAgICAgKiBjYiA6IGNhbGxiYWNrIGZ1bmN0aW9uXG4gICAgICovXG4gICAgY3JlYXRlICh0eXBlLCBzY2hlbWFEZWYsIGNiKSB7XG5cbiAgICAgIHZhciBwYXlsb2FkID0ge307XG4gICAgICBwYXlsb2FkW3R5cGVdID0gc2NoZW1hRGVmO1xuXG4gICAgICBVdGlsWEhSLnBvc3QocGF5bG9hZCwgVXJsQnVpbGRlci5mb3JPbmVTY2hlbWEodHlwZSksIGNiKTtcblxuICAgIH0sXG59IiwiXG5leHBvcnQgZGVmYXVsdCB7XG4gIFxuICBhbGw6IFsnY3JlYXRlJyxcbiAgICAgICAncmVhZCcsXG4gICAgICAgJ3JlYWRfYWxsJyxcbiAgICAgICAnc2VhcmNoJyxcbiAgICAgICAndXBkYXRlJyxcbiAgICAgICAndXBkYXRlX2FsbCcsXG4gICAgICAgJ2RlbGV0ZScsXG4gICAgICAgJ2RlbGV0ZV9hbGwnXSxcblxuICBkZWZhdWx0X2FkbWluOiBbJ2NyZWF0ZScsICdzZWFyY2gnLCAndXBkYXRlX2FsbCcsICdkZWxldGVfYWxsJ10sXG5cbiAgZGVmYXVsdF91c2VyOiBbJ2NyZWF0ZScsICdzZWFyY2gnLCAndXBkYXRlJywgJ2RlbGV0ZSddLFxuXG4gIGRlZmF1bHRfa2V5OiBbJ3JlYWRfYWxsJ10sXG5cbn0iLCJleHBvcnQgZGVmYXVsdCBbe1xuICAgIG5hbWU6J3N0cmluZycsXG4gIH0se1xuICAgIG5hbWU6J2Jvb2xlYW4nLFxuICB9XTsiLCJcbmltcG9ydCBDb25maWcgZnJvbSAnLi9saWIvY29uZmlnLmpzJ1xuaW1wb3J0IENyZWRlbnRpYWxzIGZyb20gJy4vbGliL2NyZWRlbnRpYWxzLmpzJ1xuaW1wb3J0IERhdGEgZnJvbSAnLi9saWIvZGF0YS5qcydcbmltcG9ydCBTY2hlbWEgZnJvbSAnLi9saWIvc2NoZW1hLmpzJ1xuaW1wb3J0IERhdGFQZXJtaXNzaW9uIGZyb20gJy4vbGliL2RhdGFQZXJtaXNzaW9uLmpzJ1xuaW1wb3J0IERhdGFUeXBlcyBmcm9tICcuL2xpYi9kYXRhVHlwZXMuanMnXG5cbnZhciBTcGFjZURvZyA9IHtcbiAgICBpbml0aWFsaXplIChiYWNrZW5kSWQpIHtcbiAgICAgICAgaWYgKGJhY2tlbmRJZCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IFwiQmFja2VuZElkIGlzIHJlcXVpcmVkLlwiXG4gICAgICAgIH1cbiAgICAgICAgQ29uZmlnLmJhY2tlbmRJZCA9IGJhY2tlbmRJZFxuICAgICAgICBDb25maWcuYmFzZVVybCA9IGBodHRwczovLyR7Q29uZmlnLmJhY2tlbmRJZH0uc3BhY2Vkb2cuaW9gXG4gICAgfSxcblxuICAgIGluaXRpYWxpemVXaXRoQmFzZVVybCAoYmFzZVVybCkge1xuICAgICAgICBpZiAoYmFzZVVybCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IFwiQmFzZVVybCBpcyByZXF1aXJlZC5cIlxuICAgICAgICB9XG4gICAgICBDb25maWcuYmFja2VuZElkID0gbnVsbFxuICAgICAgQ29uZmlnLmJhc2VVcmwgPSBiYXNlVXJsXG4gICAgfSxcbiAgICBcbiAgICBnZXRCYXNlVXJsICgpIHtcbiAgICAgICAgcmV0dXJuIENvbmZpZy5iYXNlVXJsXG4gICAgfSxcblxuICAgIGdldEJhY2tlbmRJZCAoKSB7XG4gICAgICAgIHJldHVybiBDb25maWcuYmFja2VuZElkXG4gICAgfSxcblxuICAgIGZvcmdldEFsbCAoKSB7XG4gICAgICAgIENvbmZpZy5iYWNrZW5kSWQgPSBudWxsXG4gICAgICAgIENvbmZpZy5iYXNlVXJsID0gbnVsbFxuICAgICAgICBDb25maWcuZGVmYXVsdF9hdXRob3JpemF0aW9uX2hlYWRlciA9IG51bGxcbiAgICB9XG59XG5cblxuU3BhY2VEb2cuX0NvbmZpZyA9IENvbmZpZyAvLyBwYXMgZW4gcmVsZWFzZSA/XG5TcGFjZURvZy5DcmVkZW50aWFscyA9IENyZWRlbnRpYWxzXG5TcGFjZURvZy5EYXRhID0gRGF0YVxuU3BhY2VEb2cuU2NoZW1hID0gU2NoZW1hXG5TcGFjZURvZy5EYXRhUGVybWlzc2lvbiA9IERhdGFQZXJtaXNzaW9uXG5TcGFjZURvZy5EYXRhVHlwZXMgPSBEYXRhVHlwZXNcblxuZXhwb3J0IGRlZmF1bHQgU3BhY2VEb2dcbiJdLCJuYW1lcyI6WyJxcyIsInJlcXVpcmUiLCJDb25maWciLCJiYXNlVXJsIiwidHlwZSIsImlkIiwiY3JlZGVudGlhbF9pZCIsInBhc3N3b3JkX3Jlc2V0X2NvZGUiLCJvcHRzIiwidXJsIiwic3RyaW5naWZ5IiwiX3hlbmQiLCJtZXRob2QiLCJwYXlsb2FkIiwiY2IiLCJkYXRhIiwiSlNPTiIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsImpzb24iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsInN1Y2Nlc3MiLCJzdGF0dXMiLCJlIiwid2FybiIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwiYXV0aG9yaXphdGlvbiIsImRlZmF1bHRfYXV0aG9yaXphdGlvbl9oZWFkZXIiLCJzZW5kIiwiQnVmZmVyIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsInRvU3RyaW5nIiwiYnRvYSIsImdldCIsIlVybEJ1aWxkZXIiLCJmb3JMb2dpbiIsImVyciIsImFjY2Vzc1Rva2VuIiwicmVtZW1iZXJNZSIsInNldEl0ZW0iLCJiYWNrZW5kSWQiLCJzYXZlZCIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJwb3N0IiwiY3JlZGVudGlhbHMiLCJlbWFpbCIsImZvckNyZWRlbnRpYWxzIiwidXNlclBheWxvYWQiLCJ1c2VyIiwiY3JlZGVudGlhbElkRmllbGQiLCJmb3JEYXRhIiwibWV0YSIsInJlbW92ZUl0ZW0iLCJ1bmRlZmluZWQiLCJwdXQiLCJuZXdQYXNzd29yZCIsImZvckNyZWRlbnRpYWxQYXNzd29yZCIsImNyZWRlbnRpYWxJZCIsImNoYWxsZW5nZWRVc2VybmFtZSIsImNoYWxsZW5nZWRQYXNzd29yZCIsImZvckNyZWRlbnRpYWxGb3Jnb3RQYXNzd29yZCIsImZvckNyZWRlbnRpYWxSZXNldFBhc3N3b3JkIiwicGFzc3dvcmRSZXNldENvZGUiLCJmb3JDcmVkZW50aWFsRW5hYmxlZCIsIlBhZ2luYXRpb25TZXNzaW9uIiwiZnJvbSIsInNpemUiLCJfZnJvbSIsIl9zaXplIiwiX3RvdGFsIiwicmVzdWx0IiwidG90YWwiLCJPYmplY3QiLCJfdHlwZSIsIl9pZCIsIl9wYXlsb2FkIiwicmV0IiwiZm9yRGF0YU9iamVjdCIsImRlbGV0ZSIsIkRhdGEiLCJwYWdpbmF0aW9uU2Vzc2lvbiIsImdldEZyb20iLCJnZXRTaXplIiwiZm9yU2VhcmNoIiwiX25ld1BhZ2VMb2FkZWQiLCJmb3JTY2hlbWEiLCJzY2hlbWFEZWYiLCJmb3JPbmVTY2hlbWEiLCJTcGFjZURvZyIsIl9Db25maWciLCJDcmVkZW50aWFscyIsIlNjaGVtYSIsIkRhdGFQZXJtaXNzaW9uIiwiRGF0YVR5cGVzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxhQUFlOztlQUVELElBRkM7O2tDQUlrQjs7Q0FKakM7O0FDRUEsSUFBSUEsS0FBS0MsUUFBUSxJQUFSLENBQVQ7O0FBRUEsaUJBQWU7WUFBQSxzQkFFQztlQUNFQyxPQUFPQyxPQUFqQjtLQUhPO2FBQUEsdUJBTUU7ZUFDQ0QsT0FBT0MsT0FBakI7S0FQTztnQkFBQSx3QkFVR0MsSUFWSCxFQVVTO2VBQ05GLE9BQU9DLE9BQWpCLGtCQUFxQ0MsSUFBckM7S0FYTzthQUFBLHFCQWNBQSxJQWRBLEVBY007ZUFDSEYsT0FBT0MsT0FBakIsa0JBQXFDQyxJQUFyQztLQWZPO2tCQUFBLDRCQWtCTztlQUNKRixPQUFPQyxPQUFqQjtLQW5CTzt5QkFBQSxpQ0FzQllFLEVBdEJa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
